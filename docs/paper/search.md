# 无人机搜索

## :gem:【2020】不确定动态环境下无人机群智能协同任务规划方案

> 论文下载地址：<a :href="$withBase('/无人机智能协同.pdf')" >无人机智能协同.pdf</a>，引用类型：ZHEN Z, CHEN Y, WEN L, et al. An intelligent cooperative mission planning scheme of UAV swarm in uncertain dynamic environment[J]. Aerospace Science and Technology, 2020,100: 105826.

:::tip 摘要
提出了一种基于人工势场和蚁群优化（HAPF-ACO）混合算法的无人机群智能协同任务规划方案，用于在不确定动态环境下搜索和攻击对时间敏感的运动目标。在无人机群搜索攻击任务环境下，建立了动态拓扑交互作用下的时敏目标概率图。在此基础上，构建了环境认知的目标吸引场、威胁排斥场和排斥场。为了提高无人机的全局搜索能力，设计了一种分布式蚁群算法。针对该任务规划问题，考虑了四种时间敏感的运动目标类型和四种约束类型的无人机群，为 HAPF-ACO 的实际应用奠定了基础。通过仿真实验，证明了所提出的智能协同任务规划方案在任务执行效率、避障避碰性能等方面的优越性。
:::

### 1.引言

无人机（UAV）在现代空战中被越来越多地用于拓展有人机的作战能力[1]。然而，随着任务环境的日益复杂，单台无人机的任务执行能力有限。因此，无人机的协同控制技术得到了广泛的研究。无人机群协同控制的分布性、自主性和鲁棒性要求与蚁群、蜜蜂群、鸟群和鱼群等生物群的分散自组织特性相似[2]。无人机群是受生物群自组织机制启发而形成的一种自主系统，通过能力互补和协同作战，极大地提高了执行效率。

由于无人机群规模庞大，其计算量和通信量呈指数增长，难以在有效时间内集中决策。因此，分布式决策方案已被提出用于各种应用，如群聚[3]、侦察[4]、监视[5]、负载运输[6]、搜索[7]、任务分配和路径规划[8-10]。在搜索任务规划问题中，概率图[11-14]和信息素图[15-17]得到了广泛的应用。目标概率图能够描述未知环境下的动态目标信息，基于此，文献[14]考虑分散通信协议，利用局部信息对目标概率进行建模。另外，利用信息素反馈机制对未知环境下的地图进行更新，可以提高地图的搜索效率。为无人机群体协同搜索设计了一种改进的信息素地图[17]。然而，无人机之间的避碰通常被忽略，因此提出了一种基于虚拟力和后退视界法的混合方案[18]。此外，仿生优化在无人机暖机任务规划中得到了广泛的应用。将鸽子算法应用于多无人机协同搜索运动目标[19]。针对主从式无人机目标检测问题，设计了一种带窗边势函数的鸟群算法，并通过实际实验验证了算法的鲁棒性[20]。马尔可夫决策过程已用于多无人机的监视任务规划[21]，而遗传算法和蚁群优化[23,24]已用于多无人机的静止目标协同搜索攻击任务，特别是，文献[24]考虑了无人机的避碰和最大距离约束。此外，参考文献[25]提出了基于毕达哥拉斯速度曲线的多无人机障碍物和禁飞区的任务分配和路径规划耦合问题。首先，这些仿生算法通常将全局优化问题分解为局部优化问题，体现了分布式协同策略的有效性。

本文旨在解决具有时敏运动目标的未知环境下固定翼无人机群协同搜索攻击任务规划问题。与文献结果不同，本文的主要贡献如下：首先提出了一种混合人工势场蚁群优化算法（HAPF-ACO），用于在不确定动态环境中搜索和攻击时间敏感的运动目标；APF 由根据目标概率图（TPM）设计的目标吸引场、基于禁飞区设计的威胁排斥场和无人机群间的排斥场组成，考虑了四种运动和时间敏感的目标类型，包括未知位置、已知位置和未知速度、已知位置在任务规划问题中，不仅要考虑机动性约束、避碰约束和避障约束，还要考虑距离约束。

本文的其余部分安排如下。第二部分，研究了无人机群协同搜索攻击任务规划问题。第三部分设计了无人机的 TPM、APF 和信息素地图，提出了 HAPF-ACO 算法来实现无人机的在线搜索攻击决策。在第 4 节中，进行了仿真以验证 HAPF-ACO 的有效性。最后，第 5 节给出了结论。

### 2.无人机群协同任务规划问题建模

2.1 **任务环境模型**

假设群中的固定翼无人机是同构的，即每个无人机具有相同的功能和性能约束。指定一个任务区域$D \in R^2$，群中有无人机$N_V$、动态移动目标$N_T$和威胁分布$N_P$。无人机群的任务是通过一种有效的决策方法，在不确定的动态环境中协同搜索和攻击运动目标。

![离散任务区](https://s1.ax1x.com/2020/06/07/t2xI6f.png)
▲ _图 1 离散任务区_

以二维空间为例，如*图 1* 所示，将任务区离散成 $N_x \times N_y$大小的栅格地图，分别记录每个栅格的长度和宽度为 $L_x$、$L_y$。无人机的机动性能与离散空间的搜索相对应，无人机的运动反映为离散网格点上的运动。红色五角星代表目标，黑色圆圈代表威胁区域，威胁半径为 $R_t$，假设无人机探测范围在任务区平面上的投影半径为$R$，无人机探测范围内出现的目标和威胁可以被无人机探测到。假设无人机的最大转弯角为 $\varphi_{max}$，无人机的速度为$v$，单位时间内的位移为$d$。如果网格的长度和宽度选择为$d$，则灰色网格表示在机动约束下无人机下一时刻的可能位置。

2.2 **动态拓扑交互模型**
以往的研究大多假设无人机可以同时与探测半径内的所有个体进行交互。这种通信方式会使无人机的通信邻居数量随着集群分布密度的变化而发生很大的变化，从而对通信量产生较大的影响。本文通过模拟生物群的信息交互机制，设计了一个动态拓扑交互模型。该模型使无人机的邻居数目基本保持不变。当群规模大、分布密集时，优势尤为明显，可以大大减少群的流量。

为了反映这种拓扑交互特征，定义了协同半径 $r^{coor}_i$ 来表示个体的实际交互规模。无人机可以实时感知协同半径内个体的状态信息，其交互邻居集可以表示为
![t2vbJ1.png](https://s1.ax1x.com/2020/06/07/t2vbJ1.png)

由于无人机的位置是实时变化的，为了达到一个基本不变的邻居数目，协作半径 $r^{coor}_i$通过下面的公式定义：
![t2vjsO.png](https://s1.ax1x.com/2020/06/07/t2vjsO.png)

其中$0<k<1$为调整率。$R_{sen}$ 是无人机的感知半径，是通信距离的上界，即 $r^{coor}_i \le R_{sen}$。$|N^c_i|$ 是第 $i$ 架无人机的当前邻居数量。$n_{topo}$是预期的邻居数。

无人机之间的通信网络结构可以用图 $G(V, E, A)$ 表示，其中 $V={V_i, i=1,2, \cdots ,N_V}$ 是图 $G$ 中的无人机节点$N_V$，$V_i$代表第 $i$ 架无人机。$E \in V \times V$表示图 $G$ 的边集，每边 $e_{ij}=(v_i,v_j) \in E$ 表示 第 $j$ 个无人机可以向第 $i$ 个无人机发送信息，$v_j$称为 $v_i$ 的父节点，$v_i$ 所有父节点的集合是 $v_i$ 的邻居集，图中每个节点的关系用邻接矩阵 $A=[a_{ij}] \in R^{n \times n}$表示，其中 $a_{ij}$表示节点 $v_j$到 $v_i$ 的连接权重，表示为
![tRC8Z8.png](https://s1.ax1x.com/2020/06/07/tRC8Z8.png)

其中 $d_{ij}$ 是第 $i$ 个无人机和第 $j$ 个无人机之间的距离。

2.3 **协同搜索攻击任务优化模型**

无人机群协同搜索攻击的目的是在给定的约束条件下，覆盖任务区域，发现并摧毁更多的目标。因此，目标攻击效益 $J_T$ 和环境搜索效益 $J_E$ 是协同搜索攻击任务的性能指标，$J_T$是被无人机攻击的目标总价值，$J_E$可以用任务区的覆盖率来表示，计算为搜索到的网格与任务区内所有网格的比率，分别定义为

![tRCBLV.png](https://s1.ax1x.com/2020/06/07/tRCBLV.png)
:blue_book: `公式(4)`

其中 $N_{target}(k)$是在时间 $k$ 时攻击的目标总数，$value_m$ 代表第 m 个目标的价值。如果在时间 $k$ 时$grid_{(m,n)}(k)$未被覆盖，则 $grid_{(m,n)}(k)=0$，否则，$grid_{(m,n)}(k)=1$。

无人机群协同搜索攻击任务的目标是在一定的约束条件下获得决策输入，使总体性能指标最大化。因此，合作搜索攻击任务优化模型被构造为：

![tRPMY4.png](https://s1.ax1x.com/2020/06/07/tRPMY4.png)
:blue_book: `公式(5)`

其中 $\omega \in \{0,1\}$，$\omega =1$ 表示执行攻击任务，而 $\omega =0$表示执行搜索任务。$U^*$是代表无人机在下一时刻的位置的解获得的最优决策输入。**$C_m$、$C_c$、$C_t$ 和 $C_r$ 分别表示无人机的机动约束、避碰约束、避障约束和距离约束**:

- $C_c$碰撞约束：$d_{ij}(k)$是第$i$架无人机和第$j$架无人机之间的距离，应该大于最小安全距离$d_{min}$，以防止无人机之间发生碰撞。
- $C_t$避障约束：$d^T_{il}(k)$是指第 $i$ 架无人机与第 $l$ 个威胁之间的距离，该距离应大于威胁半径 $R^t_l$ 以避开威胁。
- $C_r$距离约束：$L^i_{past}(k)$是 第 $i$ 架无人机的飞行距离，应小于该无人机的最大航程极限$L_{max}^i$，以防止飞行过程中燃油耗尽。

考虑到无人机群是一个非中心分布式系统，将无人机群的全局性能:blue_book:`公式(4)`分解为单个无人机的局部性能指标，从而：

![tRK8c8.png](https://s1.ax1x.com/2020/06/07/tRK8c8.png)

其中$\mu_i$表示第 $i$ 架无人机的权重。然后将分布式优化模型设计为:

![tRKD3V.png](https://s1.ax1x.com/2020/06/07/tRKD3V.png)
:blue_book: `公式(7)`

其中$X_i$, $\tilde{X}_i$分别是第 i 架无人机及其邻居的状态。$J_{Ti}(X_i, \tilde{X}_i)$是第$i$架无人机的目标攻击效益，$J_{Ei}(X_i, \tilde{X}_i)$是第$i$架无人机的环境搜索效益，$C_i$是一组约束条件。

:::warning 根本目的
:blue_book:`公式(7)`的主要目的就是把:blue_book:`公式(5)`中的全局指标改为单个无人机局部指标之和。
:::

### 3. HAPF-ACO 算法设计

该部分提出了用于协同搜索攻击任务规划的 HAPF-ACO 算法，包括目标概率图、环境认知、信息素更新机制和状态转移规则的设计。

#### 3.1 目标概率图

目标概率图(Target probability map, TPM) 描述了任务区内目标的分布情况，旨在提高发现目标的可能性。在离散任务区，$p^i_{mn}(k)$是第 $i$ 个无人机学习到的网格 $(m,n)$ 目标存在概率，$p^i_{mn}(k) \in [0,1]$。任务区$D$内所有网格的目标存在概率构成概率分布矩阵：

![tRtuMn.png](https://s1.ax1x.com/2020/06/07/tRtuMn.png)

(1) ++目标概率图初始化++

在初始时刻，各无人机根据目标的初始位置、速度和运动方向等先验信息初始化自己的 TPM。考虑到时间敏感目标，它们可以分为以下四种类型。

- **当目标的初始位置未知时**。任务区内任意网格中目标的概率相同，可以用均匀分布来描述目标的概率分布密度函数.
  ![tOsEDg.png](https://s1.ax1x.com/2020/06/12/tOsEDg.png)
  :blue_book:`公式9`
- **当目标的初始位置为$(x_*, y_*)$，目标速度未知时**。考虑到先验信息的可能误差，可以认为目标实际位置$(x_0,y_0)$的概率服从二维正态分布$N(x_*, y_*, \mu_0^2, \mu_0^2, \rho)$。因为$x_0,y_0$彼此独立，$\rho = 0$所以
  ![tRwmDA.png](https://s1.ax1x.com/2020/06/07/tRwmDA.png)
  :blue_book:`公式10`
- **当目标初始位置为$(x_*, y_*)$, 目标初始速度为 $v$，目标运动方向未知时**。目标实际位置$(x_0，y_0)$为随机变量，无人机在时间 $t_0$ 后进入任务区。由于目标速度是固定的，使得目标概率密度发生变化，点$(x, y)$处的概率密度$f(x,y)$是从半径为 $v \cdot t_0$ 的圆弧上的正态分布.
- **如果目标的初始位置为$(x_*, y_*)$，目标运动速度为 $v$，运动方向为 $\theta, \theta \in [0,2\pi]$时**。目标位置的分布偏离实际位置$(x_0，y_0)$，偏移量为$(vt_0cos(\theta), vt_0sin(\theta))$。那么概率密度函数是
  ![tRDOaR.png](https://s1.ax1x.com/2020/06/07/tRDOaR.png)

那么单个网格$(m, n)$的目标存在概率$p^i{mn}$可以表示为：
![tRrGiq.png](https://s1.ax1x.com/2020/06/07/tRrGiq.png)

然后进行归一化得到初始目标概率分布矩阵：

![tRrdL4.png](https://s1.ax1x.com/2020/06/07/tRrdL4.png)

(2) ++探测更新++

随着搜索攻击任务的推进，无人机对该区域的感知也在加深。因此，在每个决策周期中，无人机都需要根据传感器检测信息动态更新 TPM。与传感器探测距离相关的目标探测概率由下式给出:

![tRrheH.png](https://s1.ax1x.com/2020/06/07/tRrheH.png)
:::warning 解读
等式左边表示**无人机距离目标$d_k$时发现目标的概率**，等式右边考虑 3 种情况：（1）在检测范围中，（2）不确定的检测，（3）无法检测（产生虚警）。
:::
其中 $b_k \in \{0,1\}$为检测结果，$b_k=0$ 表示传感器视场（field of view, FOV）中没有目标，$b_k=1$ 表示有目标；$P_D \in [0,1]$为传感器检测概率，$P_F \in [0,1]$为虚警概率。$d_k$ 表示传感器到目标的距离，如果 $d_k<d_{in}$，传感器可以检测到目标，但由于观测的不确定性，检测到目标的概率为 $P_D$，如果 $d_k>d_{out}$，传感器无法检测到目标，如果仍然报告检测到目标，则为虚警，检测到的概率为 $P_F$。

文献[^26]考虑了覆盖多个网格的传感器，并根据传感器检测结果更新目标存在概率图。在这里我们假设 FOV 中只有一个网格(相当于一次就只检测一个网格)，然后基于贝叶斯概率公式设计了一个简化的目标存在概率图更新公式，如下所示：

[^26]: A.G. Shem, T.A. Mazzuchi, S. Sarkani, Addressing uncertainty in UAV navigation decision-making, IEEE Trans. Aerosp. Electron. Syst. 44(1) (2008) 295–313

![tRbLcD.png](https://s1.ax1x.com/2020/06/08/tRbLcD.png)
:blue_book: `公式(18)`

其中$\tau \in [0,1]$ 是衰减系数，用于表征动态环境。

:::warning 解读
上述:blue_book: `公式(18)`主要描述的是从第$k$步的网格$(m,n)$的概率, 通过搜索情况, 推算出第$k+1$步的网格$(m,n)$的概率，公式中用到了$P_D$（传感器检测概率）和$P_F$（虚警概率），具体公式怎么来的，可能还需要读文献[^26]。
:::

(3) ++预测更新++

两次决定($k$和$k+1$步)之间的时间间隔是 $\Delta t$。为了保证概率图的准确性，提高无人机群的搜索攻击效率，需要对无人机的运动进行预测，并更新相应的 TPM。

第 $k$ 个决策周期的目标位置是一个随机变量$(x^k,y^k)$，第 $k$ 个周期概率密度函数是 $f_k(x^k, y^k)$，用全概率公式表示:

![tRjBFA.png](https://s1.ax1x.com/2020/06/08/tRjBFA.png)

根据目标运动信息的不同，条件概率可以分为以下三种类型。

- **速度的大小和方向是未知的**。目标从第 $(k-1)$个周期到第 $k$个周期内的运动是一个独立的增量过程，$X(t) \sim N(0,\delta_e^2\Delta t)$ 和 $Y(t) \sim N(0,\delta_e^2\Delta t)$ 由维纳随机过程(Wiener random process[^wiener])确定。条件概率密度是
  ![tRx02t.png](https://s1.ax1x.com/2020/06/08/tRx02t.png)

- **速度的大小是已知的，速度的方向是未知的**。经过一段时间后，目标均匀地分布在半径 $v \Delta t$ 和圆心$(x^{k-1}, y^{k-1})$的弧上。条件概率密度表示为:
  ![tRzwo4.png](https://s1.ax1x.com/2020/06/08/tRzwo4.png)
- **速度的大小和方向都是已知的**。目标位置的分布与前一个周期的位置偏移。偏移量为$(v \Delta t \cdot cos \theta, v \Delta t \cdot sin \theta)$。条件概率密度函数表示为
  ![tWAvAP.png](https://s1.ax1x.com/2020/06/08/tWAvAP.png)

[^wiener]: 常见随机过程: [知乎专栏](https://zhuanlan.zhihu.com/p/93836989)

与 TPM 初始化类似，归一化后得到预测更新的 TPM，并将其结果作为下一时刻决策的先验信息。

#### 3.2 基于 APF 的环境认知

将无人机的运动环境抽象为一个势场，目标对无人机产生吸引力，障碍物对无人机产生排斥力。利用吸引力和斥力的联合作用，控制无人机的运动，引导无人机到达指定的目标位置，有效地规避环境威胁。针对无人机之间的避碰问题，引入了无人机之间的**势场**。

(1) ++目标吸引场++

基于 APF 方法，目标将产生一个引力场 $U_{att}(X)$，通过对无人机施加引力 $F_{att}$ 使无人机接近目标。在无人机群的搜索攻击任务中，目标存在概率越大，无人机越倾向于向该网格转移。然后，将 TPM 作为目标吸引场。

根据第 $i$ 个无人机的实时 $TPM_i$，吸引力场设计为:

![tWAbXd.png](https://s1.ax1x.com/2020/06/08/tWAbXd.png)

其中 $k_{att}$ 是引力系数。目标吸引力是无人机所在位置目标吸引场的梯度：

![tWALnA.png](https://s1.ax1x.com/2020/06/08/tWALnA.png)

在目标吸引力的作用下，无人机将向目标存在概率上升最快的方向移动。当确认目标被探测到时，无人机将根据目标吸引力接近目标，直到目标在无人机攻击半径内，再攻击目标。如果同时发现多个目标，优先选择值较高的目标进行攻击。

:::danger 疑惑
理论上可以这么假设，但是如果使用势场的方式，那么多个目标的吸引力叠加怎么解决，而且可能永远无法吸引目标点，到另外获取场信息需要的计算量很大。
:::

(2) ++威胁排斥场++

无人机可能遭遇当地恶劣天气、地形阻挡和敌人威胁造成的禁飞区。为了保证无人机的安全和任务的顺利执行，无人机需要避开威胁区域。在人工势场法的基础上，威胁区域产生一个斥力场 $U_{rep}^T$，该斥力场可以通过施加斥力使无人机远离威胁。

假设威胁区域为圆形，中心位置为 $X_t$，半径为 $R_t$，当无人机到威胁区域边缘的距离小于无人机的探测半径 $R$ 时，无人机可以探测到威胁，即：无人机与威胁区中心的距离小于 $R+R_t$，为严格防止无人机进入威胁区，设计的斥力应随着无人机与威胁区距离的减小而增大。如果 第$i$ 个无人机的位置是 $X_i$，那么威胁击退设计为

![tWAmyd.png](https://s1.ax1x.com/2020/06/08/tWAmyd.png)

其中 $k_{rep}$ 为斥力系数，$x_{il} = X_i-X_t^l$ 为检测到的指向第 $i$ 架无人机的第 $l$ 个威胁的位置向量，$\hat{x}_{il}=x_{il}/ ||x_{il}||$。$d_{max,l}^t$ 是第 $l$ 个威胁排斥场的作用半径，如果无人机与威胁中心的距离大于 $d_{max,l}^t$，则无人机不再受到排斥力；$d_0 \ge R_t$ 为最小安全距离，则无人机与威胁中心的距离不得小于 $d_0$。

(3) ++无人机之间的排斥场++
当无人机群协同执行任务时，随着同一任务空域内无人机数量的增加，必然会有一些无人机的搜索路径在时间和空间上重叠，导致无人机之间发生碰撞。为了保证无人机的安全，距离过近的相邻无人机会产生排斥场 $U_{rep}^V$，实现无人机群之间的动态避碰协调。本文基于以下广义 Morse 函数[^morse]建立了无人机之间的斥力场:

![tWkOiT.png](https://s1.ax1x.com/2020/06/08/tWkOiT.png)

[^morse]: 关于 morse 函数应用在路径规划的论文, [下载地址](https://www.ri.cmu.edu/pub_files/pub2/choset_howie_2000_1/choset_howie_2000_1.pdf)

其中 $b$ 和 $c$ 是可调参数，分别决定排斥场的大小和变化率。$x_{ij} = X_i-X_j$ 是第 $j$ 架无人机到第 $i$ 架无人机的位置矢量。$[d_{\min}，d^v_{\max}]$是无人机之间排斥场的范围，$d_{\min}$ 是无人机之间的最小安全距离。如果 $x_{ij}<d_{\min}$，则无人机之间发生碰撞。$d^v_{\max}$ 是无人机之间排斥场的最大工作距离。

作为排斥场的负梯度，无人机之间的排斥是：

![tWkssA.png](https://s1.ax1x.com/2020/06/08/tWkssA.png)
:blue_book:`公式27`

式中，$\hat{x}_{ij}=x_{ij}/||x_{ij}||$ 是从第 $j$ 架无人机指向第 $i$ 架无人机的单位矢量。当确定了参数$b$ 和 $c$时，无人机之间的斥力大小仅取决于距离。距离越近，排斥力越大，可以有效实现无人机之间的防碰撞。

#### 3.3 信息素更新机制

为了实现无人机之间的任务协同，将信息素值分配给任务区的所有网格。设计了一种信息素更新机制，避免无人机搜索其他无人机搜索过的网格，并驱动无人机搜索未搜索过的网格。

(1) ++分布信息素结构++

不同网格的信息素浓度反映了网格对无人机的吸引力程度。信息素浓度越高，无人机越倾向于向该网格转移。因此，无人机可以根据搜索情况合理更新局部信息素结构，实现群体的任务协调。

无人机群采用无中心节点的分布式体系结构。因此，群体中没有公共信息素。每个无人机都建立自己的局部信息素结构，只更新自己维护的信息素结构。任务区内各网格在某一时刻的信息素浓度值构成了该时刻无人机的局部信息素结构，表明无人机对当前环境搜索态势的感知。第 $i$ 架无人机维持的局部信息素结构 $\tau^i(k)$为：

![tWkUIK.png](https://s1.ax1x.com/2020/06/08/tWkUIK.png)

其中 $\tau_{(x,y)}^i(k)$表示网格$(x,y)$处的信息素浓度值。

同时，为了防止某一区域的信息素浓度过高或过低，设置信息素浓度值的下限 $\tau_{\min}$ 和上限 $\tau_{\max}$，所有网格的信息素浓度应在$[\tau_{\min},\tau_{\max}]$范围内，即无人机维持的信息素结构满足

![tWk1xJ.png](https://s1.ax1x.com/2020/06/08/tWk1xJ.png)

(2) ++局部信息素更新机制++

为了避免群体对某一区域的过度搜索，无人机之间应建立协调机制。因此，为了保证无人机之间的区域搜索协调，设计了局部信息素更新规则。无人机完成一步搜索后，根据自身和相邻无人机的当前状态信息更新维护的局部信息素，降低搜索网格的信息素浓度，防止群体重复搜索某一区域。

第 $i$ 无人机在时间 $k$ 上掌握的整个群体的状态信息:
![tWku5T.png](https://s1.ax1x.com/2020/06/08/tWku5T.png)

:blue_book:`公式30`

其中 $Info_{j,i}(k_{j,i})$ 是第 $i$ 架无人机在时刻 $k$ 获得的第 $j$ 架无人机的历史状态信息，包括位置信息 $x_{j,i}(k_{j,i})$，$y_{j,i}(k_{j,i})$和运动方向信息 $\psi_{j,i}(k_{j,i})$。据此，第 $i$ 架无人机在时间 $k$ 预测蜂群的状态：

![tWEA7q.png](https://s1.ax1x.com/2020/06/08/tWEA7q.png)

基于预测信息，第 $i$ 架无人机根据以下更新机制更新本地信息素结构:

![tWEn9U.png](https://s1.ax1x.com/2020/06/08/tWEn9U.png)

![tWEMjJ.png](https://s1.ax1x.com/2020/06/08/tWEMjJ.png)

其中 $\Delta \tau_{l(x,y)}^{(i,j)}(k)$ 在网格$(x,y)$上第 $j$ 个相邻无人机引起的信息素衰减，$\Delta \tau_{l_0}$是局部信息素衰减常数，$d\left((x,y), (x^*_{j,i}(k), y^*_{j,i}(k))\right)$是网格$(x,y)$与网格$\left(x^*_{j,i}(k), y^*_{j,i}(k)\right)$之间的距离。

(3) ++全局信息素更新机制++

一个新的目标可能出现在已经搜索的区域，这会增加不确定性和对无人机的吸引力。因此，有必要相应地提高每个网格的信息素浓度。

本文设计了一种全局信息素更新机制，用于定期对所有网格执行信息素增强操作：

![tWEsEt.png](https://s1.ax1x.com/2020/06/08/tWEsEt.png)

:blue_book:`公式34`

其中$F \in (0,1)$ 为环境不确定性因子，$\Delta \tau_{g_0}$为更新步长。环境的动态性越强，$F$ 越大，信息素浓度越高。

#### 3.4 状态转换规则

对任务区域进行离散化，初始化局部人工势场和信息素结构信息。然后，根据该准则选择确定性状态转移或概率性状态转移。当蚁群进入下一个节点时，更新状态信息，预测目标概率图，直到到达目标点的终点。

(1) ++确定性转换规则++
假设当前网格是 $s_i$，考虑到无人机的距离约束，确定的过渡规则设计为:

![tWVmVI.png](https://s1.ax1x.com/2020/06/08/tWVmVI.png)

其中 $\Omega$是下一次蚂蚁的候选网格集。$\theta_j$是当前网格到候选网格 $s_j$ 的路径与当前网格位场力方向的夹角，$L_{\max}$是最大距离，$L_{past}(k+1)$为下一时刻无人机的穿越距离，$D_{left}(k+1)$为起始位置或特定目的地与网格 $s_j$ 的距离，$\omega_1$ 和 $\omega_2$ 的和为$1$，当无人机在 $k+1$ 时刻的穿越距离小于或等于最大距离的一半时，$\omega_2$等于$0$，否则 $\omega_2$等于$1$，$q$为$[0，1]$范围内的随机数，$\lambda$ 为环境感知因子，$F$代表当前网格的势能场力大小，$F_{\max}$表示当前检测范围内电势的最大值。如果 $F$较大，即附近有目标、威胁或蚂蚁太近时，将执行确定性转移。

在下一时刻，从候选网格中选择与当前势场方向成最小角度的网格作为转移节点，使蚂蚁在势场力的作用下能够快速接近目标，远离威胁区域或距离太近的蚂蚁。

::: warning 解读
所谓确定转移: 就是太靠近目标/障碍物/其他无人机时, 无人机**必须**进行转移, 以保证自身不受伤或者收集目标数据, 但是在**优先级上应首先保证自己不受伤**, 这部分论文没体现.
:::

(2) ++启发式转换规则++

当 $q \ge \lambda F/F_{\max}$ 时，采用启发式转换规则。在执行状态转换时，下次获得蚂蚁的候选网格时应考虑无人机当前位置 $p(k)$、航向$\varphi (k)$、最大转弯角$\varphi_{\max}$ 和单位决策时间的位移 $\Delta d$。然后根据每个候选网格的信息素浓度和启发式信息，选择下一时刻蚂蚁的转移网格。蚂蚁从当前网格$s_i$移动到候选网格 $s_j$ 的状态转移概率 $p_{ij}(k)$定义为:

![tWVNaq.png](https://s1.ax1x.com/2020/06/08/tWVNaq.png)

:blue_book:`公式36`

其中 $\tau_{ij}(k)$，$\eta_{ij}(k)$分别是来自网格$s_i$到$s_j$的信息素浓度和启发信息。$\alpha$ 为信息启发因子，$\beta$为期望启发因子。$p_{ij}(k)$越大，蚂蚁移动到候选网格 $s_j$的概率就越大。

基于:blue_book:`公式36`得到的各候选网格的状态转移概率，并考虑无人机的距离约束，设计了启发式状态转移规则为:

![tWVWi6.png](https://s1.ax1x.com/2020/06/08/tWVWi6.png)

其中 $q_1$ 是$[0,1]$范围内的随机数，$0<q_0<1$。$S$ 是根据:blue_book:`公式36`选择的随机变量。蚂蚁倾向于选择信息素浓度和启发式信息都较大的网格。通过将任务区域的覆盖度设计为启发式信息，蚂蚁以更高的概率移动到无搜索网格中，从而增加了寻找目标的可能性。

此外，当蚂蚁被搜索到的网格所包围时，候选网格的启发式信息基本相同，这就导致蚂蚁可能不会或需要很长时间跳出局部搜索。因此，采用了一种改进的转移规则：如果覆盖率在一定的迭代次数内没有变化，则蚂蚁将移动到最近的无搜索网格。提高任务区覆盖率，提高全局搜索能力。

#### 3.5 HAPF-ACO 流程图

基于上述设计，采用的 HAPF-ACO 算法流程如*图 2*所示。传统的启发式蚁群算法只考虑信息素浓度和启发式信息对蚂蚁状态转移的影响。在 HAPF-ACO 算法中，APF 被引入启发式 ACO 算法，由公式（9）–（27）给出。除了公式（30）～（34）所给出的信息素浓度和启发式信息的影响外，在蚂蚁的状态转移中还应考虑 APF 力的影响，以实现在线避障和碰撞避障。因此，HAPF-ACO 算法改进了蚂蚁的状态转移规则，根据蚂蚁的网格势能将（35）给出的确定性转移和（37）给出的启发式转移结合起来，在状态转移规则中加入了无人机飞行约束。
![tWVOFP.png](https://s1.ax1x.com/2020/06/08/tWVOFP.png)
▲ _图 2 HAPF 算法流程图_

### 4.仿真分析

为了验证 HAPF-ACO 算法在无人机群搜索-攻击问题中的优越性，进行了基于 MATLAB 的仿真研究.

#### 4.1 任务场景和参数设置

任务区为 100km×100km，离散为 100×100 网格。区域内分布 16 个目标，每种类型有 4 个目标。利用相应的概率分布，初始位置方差 $\delta_0=5$ , Wiener 随机过程参数 $\delta_e=2$随机生成目标运动状态。目标运动信息如表 1 所示，其中目标 #13-#16 为均匀分布的未知目标。

![t4A4G6.png](https://s1.ax1x.com/2020/06/09/t4A4G6.png)

▲ _表 1 目标移动信息_

假设无人机在接到任务指令 $t_0=50s$ 后进入任务区，速度为 100m/s，每个决策步骤为 10s，即无人机每次决策移动一个网格。无人机的最大转弯角 $\varphi_{\max}=45^{\circ}$，探测半径 3km，攻击半径 1km，传感器探测概率 $P_D=0.9$，虚警概率 $P_F=0.1$。HAPF-ACO 算法中的其他相关参数如表 2 所示。
![t4AOII.png](https://s1.ax1x.com/2020/06/09/t4AOII.png)
▲ _表 2 HAPF-ACO 算法参数的描述和值_

#### 4.2 任务执行效率分析

假设两架无人机执行任务，初始位置为（10，10）公里和（90，90）公里，不考虑任务区内的威胁。预计邻居数量$n_{topo}=1$，无人机感知半径为 50km。研究了以下三种算法：

- 算法 1：粒子群优化算法（PSO）是一种流行的仿生智能优化算法，已应用于任务规划问题[^4]。本文采用 PSO 算法来解决这一搜索攻击问题，并与提出的算法进行了比较。
- 算法 2：人工势场蚁群优化算法（ACO APF）[^27]：它是在不考虑距离约束的分布式蚁群优化算法的基础上，在不考虑 TPM 动态更新的情况下引入 APF。
- 算法 3：人工势场与蚁群混合优化算法（HAPF-ACO）：该算法基于一种分布式蚁群算法，在考虑范围约束的前提下，采用改进的过渡规则，并考虑 TPM 的动态更新，引入了 APF。

[^4]: Y.B. Wang, P. Bai, X.L. Liang, Reconnaissance mission conducted by UAV swarms based on distributed PSO path planning algorithms, IEEE Access 7 (2019) 105086–105099.
[^27]: X. Tan, D.F. Chen, A hybrid approach of path planning for mobile robots based on the combination of ACO and APF algorithms, in: International Workshop on Intelligent Systems and Applications, IEEE, Wuhan, China, 2009.

## :gem:【2019】多无人机协同搜索攻击动态目标的分布式智能自组织任务规划

> 引用类型：ZHEN Z, ZHU P, XUE Y, et al. Distributed intelligent self-organized mission planning of multi-UAV for dynamic targets cooperative search-attack[J]. Chinese Journal of Aeronautics, 2019,32(12): 2706-2716.

:::tip 摘要
研究了具有动态目标和威胁的协同搜索攻击任务问题，提出了一种多无人机（multi-UAV）分布式智能自组织任务规划（DISOMP）算法。DISOMP 算法分为四个模块：基于分布式蚁群优化算法的搜索模块、基于并行逼近算法的攻击模块、基于 Dubins 曲线的威胁回避模块、多无人机系统与动态环境之间用于信息交换的通信模块。对多无人机搜索攻击运动目标进行了一系列仿真，分析了 DISOMP 算法的搜索攻击任务完备性、执行效率和系统适用性。仿真结果表明，基于在线分布式自底向上策略的 DISOMP 算法在动态目标搜索和攻击问题上具有良好的灵活性、可扩展性和适用性。
:::

随着自动化技术的发展，无人机系统变得越来越复杂和强大。预计无人机将逐步进入空军主战武器，并将部分取代部分喷气式战斗机和轰炸机，以承担大部分防空和打击任务。空军研究室根据观察定向决策行为模型，将无人机自主能力划分为 10 个层次。如今，无人机逐渐从战术层面上升到战略层面。多无人机协同控制技术在多无人机协同控制中发挥着重要的作用，包括任务分配、路径规划与重规划、任务规划、编队与重构、通信网络等。此外，多无人机协同控制技术的发展促进了无人机技术的进一步的研究。

集中式控制结构和分布式控制结构是多无人机协同控制结构的两种。随着无人机性能的提高，具有可靠性高、计算量小、通信量小等优点的分布式控制体系结构成为研究热点。因此，本文采用分布式控制体系结构。协同任务规划问题的具体策略主要分为自顶向下和自顶向下两种。基于层次分解策略的自顶向下方案虽然能有效降低问题的难度和复杂度，但在战场态势动态变化时，会消耗大量的计算和通信成本。相比之下，**基于自组织策略的自下而上方案更强调个体对环境的动态响应**，因而更可靠、更灵活。本文基于群体智能，提出了几种计算简单、鲁棒性好的自组织自顶向下方案。文献 9 调查了异构飞行自组织网络结构，提出了多种分布式网关选择算法。文献 10 提出了一种基于分布式遗传算法的多无人机协同任务规划快速耦合解决方案。

因此，本文旨在解决动态环境下多无人机协同搜索攻击任务规划问题，提出了一种新的自组织自顶向下的方法。与其他文献结果不同，本文的主要贡献如下。

（1）针对不确定环境下动态目标的多无人机协同搜索攻击问题进行了综合研究。参考文献 11、12、13、14、15、16、17、18 研究了具有固定目标的多无人机协同搜索攻击问题。参考文献 19 研究了多无人机对运动目标的协同搜索规划和任务分配。参考文献 20 和 21 主要关注移动目标的搜索任务。参考文献 22 开发了一种新型的多无人机协同监视网络平台，并进行了多运动目标识别与跟踪实验。此外，在搜索攻击问题中，考虑了无人机机动性、碰撞规避和威胁规避的实际约束，这是许多参考文献忽略或没有深入研究的问题。

（2）针对协同搜索攻击任务规划问题，提出了一种分布式智能自组织任务规划（DISOMP）算法。对于协同搜索问题，提出了一些算法：如最优搜索理论 15，基于网格的搜索算法 16，概率决策方法 12、17、19，启发式算法 11、13、18、20、21、22 和预测算法 14。本文算法由分布式搜索模块设计的搜索模块构成蚁群优化（ACO）算法，采用并行逼近（PA）制导方法设计的攻击模块，基于 Dubins 曲线（DC）方案设计的威胁规避模块，以及用于多无人机系统间信息交换的通信模块。该组合优化方案能有效地解决不确定动态环境下的搜索攻击集成任务规划问题。深入研究了 DISOMP 算法的任务完备性、任务执行效率和多无人机系统适应性。这些都有助于 DISOMP 算法的实际应用。

本文其余部分安排如下。第 2 部分研究了多无人机协同搜索攻击任务规划问题。第 3 部分提出了由搜索模块、攻击模块、威胁规避模块和通信模块组成的 DISOMP 算法。在第 4 部分中，进行了仿真以验证 DISOMP 的有效性。最后，第 5 部分给出了结论。

### 2. 协同搜索-攻击问题描述

该部分对不确定环境下的搜索攻击任务进行建模，定义搜索攻击任务规划问题，给出搜索攻击任务规划模型的约束条件。

#### 2.1 不确定环境下的搜索-攻击

图 1 给出了在不确定环境中的搜索攻击任务的说明。

（1）任务区域划分

![tjdY5t.png](https://s1.ax1x.com/2020/06/13/tjdY5t.png)

▲ _图 1 搜索-攻击任务区图解_

在二维平面上离散和栅格化任务区域 L W。任务区内存在多无人机协同系统，包括一些同构无人机、目标（如移动的地面或空中车辆）和威胁（如环境障碍物、敌方雷达和火力点）。无人机在离散空间中受机动性、碰撞规避和威胁规避的约束在网格间运动。

（2）无人机性能与运动参数

假设一个多无人机系统中的无人机是同构的，每个无人机采用相同的搜索传感器和攻击武器，可以执行搜索和攻击任务。设任务区无人机探测距离投影半径为 RS，无人机最大转弯角为 φmax，无人机速度为 Vu，无人机步进位移为 d，无人机的探测距离和下一个可能位置如图 1 所示，用半圆和一些深颜色网格表示。

(3)动态目标和威胁

任务区内有 $N_T$ 个动态移动目标和 $N_t$ 个威胁，分别用图 1 中的三角形和圆圈表示（标记为 1，2，... $N_t/N_T$）。多无人机系统中，目标以垂直起降速度直线或任意方向曲线运动，威胁半径为 $R_t$，这些信息都是事先未知的。

多无人机系统的任务是：**搜索和攻击这些目标，保证无人机不进入受威胁区域。**

#### 2.2 搜索攻击任务规划问题

针对动态目标的多无人机协同搜索攻击一体化任务可以转化为一个任务规划问题。

==定义 1(目标搜索任务)==

当目标在无人机探测范围内时，视为搜索目标，描述为

![tj8Gs1.png](https://s1.ax1x.com/2020/06/13/tj8Gs1.png)

其中 $R_S$ 是探测范围，$r$ 是无人机与目标之间的距离。**监视覆盖率**计算为已搜索网格与任务区内所有网格的比率，表示为
![tj1Dte.png](https://s1.ax1x.com/2020/06/13/tj1Dte.png)

其中$node_{x,y}=0$表示网格$(x,y)$未搜索，$node_{x,y}=1$表示网格$(x,y)$已被搜索。搜索任务的目标是增加任务区的覆盖范围，以便找到更多的目标，因此，将监视覆盖率作为搜索效益$J_S$，即:

![tj8tZ6.png](https://s1.ax1x.com/2020/06/13/tj8tZ6.png)

==定义 2（目标攻击任务）==

当无人机寻找目标时，它会飞起来跟踪目标。当目标处于攻击范围内时，认为目标受到攻击，这被描述为

![tj8wJe.png](https://s1.ax1x.com/2020/06/13/tj8wJe.png)

其中$R_A$是攻击范围。攻击效益计算为被攻击目标的总价值，计算公式为:
![tj3p9J.png](https://s1.ax1x.com/2020/06/13/tj3p9J.png)

其中 $N_{T0}$ 是被攻击的目标总数，$value_l$是第 $l$ 个目标的价值。攻击任务的目标是使攻击效益最大化，即

![tj82o8.png](https://s1.ax1x.com/2020/06/13/tj82o8.png)

==定义 3（集中式搜索攻击任务规划模型）==

假设有一个中央处理器来决定搜索攻击任务，那么任务规划模型可以定义为通过最大化以下性能指标函数来决定无人机搜索和攻击运动目标的飞行路径：

![tj3e4e.png](https://s1.ax1x.com/2020/06/13/tj3e4e.png)

其中，$\omega \in \{0,1\}, \omega =1$表示无人机正在执行搜索任务，$\omega = 0$表示无人机正在执行攻击任务，$U$ 是表示无人机在下一时刻位置的决策输入，$C$ 是任务规划模型的约束集。

==定义 4（分布式搜索攻击任务规划模型）==

假设每个无人机是一个独立的个体，有一个独立的处理器来构建自己的解决方案，然后将集中式搜索攻击任务规划模型转化为分布式模型。可以将搜索公式（3）和攻击公式（6）分别分解为分布式结构，即：

![tj3U3j.png](https://s1.ax1x.com/2020/06/13/tj3U3j.png)

::: danger 疑问
部分表达式没解释， 我猜$N_u$代表无人机个数，$J_{Si}$代表第$i$架无人机的搜索效益。如果是这样的话，以上公式**有问题**，公式只是简单的把每架无人机的搜索和攻击目标价值加起来，但是并没有考虑到多架无人机搜索/攻击同一个目标的情况.
:::

其中$\mu_i$是第$i$个无人机的权重系数。然后，集中式任务规划模型公式（7）可以分解为:

![tj0gjU.png](https://s1.ax1x.com/2020/06/13/tj0gjU.png)

其中，$X_i$是第$i$架无人机的状态向量，$T^i_{adjoin}$是与第$i$架无人机通信的无人机集合，$C_i$ 是第 $i$个 UAV 的约束集合，将在下一小节中给出。

:::danger 疑问
这里公式有错误，$G_i$应该改为$C_i$，$X_i$是第$i$架无人机的状态向量，这个状态向量到底是什么鬼？为什么$X_i$是向量,$\tilde{X}$又变成集合了，变量$J_{Si}(X_i, x_j)$这种表示到底代表什么意思也没有说明。我个人理解这里想表达的是，对于无人机$i$, 它下一步的最优解应该怎么选呢，需要把搜索价值和攻击价值进行求和，搜索价值是它和它通信的一群无人机，保证这一小群达到局部最优。

_ps_: 后来仔细看了下，原来投的是国内期刊的英文版（中国航空学报），怪不得这么不严谨。
:::

#### 2.3 搜索攻击任务规划模型的约束条件

多无人机任务规划模型的约束主要包括机动性约束 Cm、避碰约束 Cc 和威胁规避约束 Ct。然后，等式（9）中的约束集 Ci 可以表示为 Ci={Cm，Cc，Ct}。

(1) **机动性约束**

每架无人机的最大转弯角度 $\varphi_{\max}$ 限制了其转弯半径和速度，表示为:

![tj8OFU.png](https://s1.ax1x.com/2020/06/13/tj8OFU.png)

其中，$\varphi_i(k)$是第$i$ 架无人机在时间$k$处的转向角。

(2) **避免碰撞约束**

考虑两无人机之间的安全距离 dmin，以避免碰撞，其表示为
![tjGiTK.png](https://s1.ax1x.com/2020/06/13/tjGiTK.png)
其中 dij（k）是时间 k 处第 i 无人机和第 j 无人机之间的距离。

(3)**威胁规避限制**
考虑了威胁（如障碍物、火力和雷达）与无人机之间的安全距离。
无人机与威胁中心之间的距离不应小于威胁半径，表示为:
![tjGm6A.png](https://s1.ax1x.com/2020/06/13/tjGm6A.png)
其中$d_{il}(k)$是第 $i$ 架无人机和第 $l$ 个威胁之间的距离。

### 3.协同搜索攻击问题的 DISOMP 设计

通过无人机与战场环境的信息交互，在线规划多无人机的飞行路径，完成任务。本部分将设计动态目标协同搜索攻击问题的 DISOMP 算法。

#### 3.1 DISOMP 的结构

多无人机系统中的每一个无人机都有一个单独的处理器来处理其局部任务，包括目标搜索任务、攻击任务以及与其他相邻无人机的通信。DISOMP 算法的结构如图 2 所示，其由搜索模块、攻击模块、威胁规避模块和通信模块组成。各模块的设计细节如下。

![tjGt6s.png](https://s1.ax1x.com/2020/06/13/tjGt6s.png)

图 2 DISOMP 算法的结构

#### 3.2 基于蚁群算法的搜索模块

根据定义 1，所有无人机都采用相同的搜索传感器来搜索任务区域。当目标在无人机的探测范围内时，视为目标被发现。蚁群算法是一种具有全局优化性能、通用性特点的智能优化算法。在蚁群算法的基础上，通过最大化分布式搜索攻击任务规划性能指标方程（9）和约束方程（10） –（12），在线生成各无人机的航路点。

（1） 蚂蚁与无人机的仿真关系。在搜索模块中，将无人机模拟为蚂蚁，假设蚂蚁具有无人机平台的定位、感知、记忆、移动、作战、通信和自我更新能力，同时受无人机性能约束。模拟了无人机在蚂蚁移动时的飞行过程。蚁群算法的迭代等于无人机的任务规划决策，也等于无人机的飞行步骤。将协同搜索任务问题模拟为分布式最优路径搜索问题。

::: warning 理解
上述表达式为什么要用蚁群算法的关键解释，即：直接用蚁群算法得到的路径就等于无人机下一步路径，可以规避掉使用 PSO、遗传算法的表示问题。
:::

（2） 局部信息素更新机制。当蚁群完成状态转换时，需要根据整个蚁群的位置分布来更新信息素浓度。为了避免对某一区域的过度搜索，应降低已搜索网格的信息素浓度。第 j 个蚂蚁在 kj 时刻的信息被第 i 个蚂蚁所知道，可以表示为
![tjG4AK.png](https://s1.ax1x.com/2020/06/13/tjG4AK.png)

式中，$\left(x_j(k_j),y_j(k_j)\right)$为第 $j$ 个蚂蚁的位置，$PSI_j(k_j)$为第 $j$ 个蚂蚁的运动方向。第 $j$ 个蚂蚁在第 $k$ 时刻的信息由第 $i$ 个蚂蚁预测为:
![tjJ93Q.png](https://s1.ax1x.com/2020/06/13/tjJ93Q.png)
然后，第 $i$ 个蚂蚁的局部信息素更新机制被描述为
![tjJFun.png](https://s1.ax1x.com/2020/06/13/tjJFun.png)

![tjJVEV.png](https://s1.ax1x.com/2020/06/13/tjJVEV.png)

（3） 全局信息素更新机制。由于环境的不确定性，如搜索区域出现新的目标等，信息素需要经过一定的时间间隔后进行全局增强。全球信息素更新机制描述如下
![tjJR2Q.png](https://s1.ax1x.com/2020/06/13/tjJR2Q.png)

（4） 状态转换规则。蚂蚁代理的转移规则设计为
![tjJhKs.png](https://s1.ax1x.com/2020/06/13/tjJhKs.png)

（5） 最优路径生成过程。蚂蚁主体的运动受自身状态和相邻蚂蚁主体状态的影响。首先，初始化 ACO 参数和任务区域。其次，根据等式（13） –（16）更新搜索区域的局部信息素。，任务区的全球信息素根据式（17）更新。第三，蚂蚁代理按照状态转移规则公式（18）进行移动，通过蚁群算法得到最优飞行路径。

（6） 收敛性分析。与经典蚁群算法的收敛定义不同，DISOMP 的收敛定义为蚂蚁的监视覆盖率。如果在一定的迭代次数下，监视覆盖率最终能够达到一个稳定的水平，则认为分布式蚁群算法是收敛的。如果蚂蚁代理被搜索到的网格包围，就会陷入过度的局部搜索。相应地，对于 DISOMP 算法，当覆盖率对迭代阈值保持不变时，蚂蚁代理应该移动到最近的无搜索区域。该方案保证了任务区覆盖率始终能达到 100%。因此，DISOMP 算法是收敛的。

#### 3.3 基于 PA 的攻击模块

PA 是(Parallel Approach, 平行方法)的简称。根据定义 2，基于 PA 制导方法，无人机可以跟踪和打击运动目标。攻击任务分为目标跟踪和目标打击两个步骤。

（1） 目标跟踪。如图 3 所示，目标线方位角 q 为目标线与基线的夹角，ru 为无人机速度矢量与基线的夹角，rT 为目标速度矢量与基线的夹角，wu 为目标线与无人机速度矢量的夹角，wT 是目标线和目标速度矢量之间的夹角。PA 制导方法要求目标视线在制导过程中沿给定方向保持平行运动，从而控制目标线的方位角速度为零。
因此，PA 制导方法表示为

![tjYiGD.png](https://s1.ax1x.com/2020/06/13/tjYiGD.png)

然后无人机的引导指令由
![tjYFRe.png](https://s1.ax1x.com/2020/06/13/tjYFRe.png)

![tjYMi8.png](https://s1.ax1x.com/2020/06/13/tjYMi8.png)
图 3 并行方案示意图。

（2） 攻击目标。由 PA 制导律方程（20）可知，当目标呈直线运动时，只要速度比 Vu/vt 不变，无人机就可以向任何方向攻击目标，得到直线轨迹。当目标处于复杂机动时，需要动态变化。

#### 3.4 基于 DC 的威胁规避模块

当无人机检测到威胁时，无人机执行规避威胁的任务，包括两个步骤：一是威胁判断，二是基于 DC 的安全路径生成。

（1） 威胁判断。当无人机发现威胁时，无人机将根据无人机与威胁的相对距离和方向，判断是否有必要避开威胁。无人机向前移动，同时探测环境以继续执行任务。判断候选网格能否成功避开威胁。如果可以在下一步即 d dil kRT 进入受威胁区域，则无人机将基于 DC 生成安全路径，如图 4 所示。

![tjt4A0.png](https://s1.ax1x.com/2020/06/13/tjt4A0.png)

图 4 无人机威胁探测示意图

(2) 基于 DC(Dubins Curve
,杜宾斯曲线) 的安全路径生成。Dubins 曲线最初是由 Dubins 于 1961 年提出的，在飞机航迹规划中得到了广泛的应用。DC 通常产生四种路径：两条外切路径和两条内切路径。选择最短的一条作为最优路径。如图 5 所示，PS（xs，ys）是速度 Vs 的初始位置，PF（xf，yf）是速度 Vf 的最终位置，Rs 是初始圆的半径，Rf 是最终圆的半径，虚线是内接路径，实线是外接路径。那么 DC 方案的解 $\gamma$ 可以表示为
![tjtnX9.png](https://s1.ax1x.com/2020/06/13/tjtnX9.png) 。
根据欧几里德几何方法，通过以下步骤 8 可获得安全路径：（A）求出初始圆 Os（xcs，ycs）和最终圆 Os（xcf，ycf）的中心坐标；（B）画一个圆，当它是内接 DC 时，该圆的半径为 Rf+Rs；当它是外接 DC 时，循环半径为 Rsj；（C）最终圆上的切点为最优路径的出口点 PN，初始圆上的切点为入口点 PX；（D）最后用中心 Os 从 PSto PX 画一个弧，连接 PX 和 PN，用中心 Os 从 PN 到 pf 画一个弧，然后生成安全最优路径。

![tjYfJO.png](https://s1.ax1x.com/2020/06/13/tjYfJO.png)

图 5 外切和内切 DC

#### 3.5 通信模块

通信模块贯穿整个任务过程，负责无人机运动位置和方向的信息交换。每个无人机需要与相邻的无人机以设定的间隔进行通信，如等式（15） 和（16）所示。所交换的信息主要包括用于避碰和协同控制的自身状态信息。此外，动态环境和无人机之间也存在信息交换，如式（17）所示。

## 【2019】增强生物激励群体行为：目标搜索中无人机协同优化的元启发式方法

> 引用格式:ALFEO A L, CIMINO M G C A, VAGLINI G. Enhancing biologically inspired swarm behavior: Metaheuristics to foster the optimization of UAVs coordination in target search[J]. Computers & Operations Research, 2019,110: 34-47.

:::tip 摘要
无人机（UAV）技术的小型化最近鼓励在未知环境中使用许多小型无人机执行搜索任务，前提是自主和自适应协调逻辑可以有效。在这一研究领域中，生物启发的元启发式方法已经被用于模拟群体、群体和其他协调模式。当考虑（i）多个元启发式的组合和优化以及（ii）通过技术进步增强生物启发的元启发式时，此类系统的设计和管理是一个研究挑战。本文将无人机群体协调技术应用于目标搜索中，分别以群体和群体能量为基础，提供鲁棒的编队控制和动态环境信息共享。这两种元启发式方法的设计都考虑了无人机的装备，并通过差分进化算法使协调逻辑适应任务。该算法优化了所有元启发式算法的聚合结构参数，以允许与任务环境进行最有效的协调。通过在合成和真实场景中模拟目标搜索任务，研究了 stigmergy 的一些可能增强。
:::

### 1.引言与动机

由于最近的技术进步，无人驾驶飞行器（uav）变得越来越容易接近，现在越来越广泛地应用于各个领域，包括探索未知领土和监测危险环境。事实上，通过远程控制无人机，地面操作人员可以利用无人机的感知能力，同时对所谓的 D3 任务（枯燥、肮脏和/或危险（Whitehead 等人，2014））进行装扮，在这些任务中，接触人类的机会是有限的、危险的或不可能的。许多考虑因素不鼓励使用单架无人机，而支持无人机集团（Whitehead 等人，2014 年）。使用独特的无人机会导致单点故障：不可预测的硬件和/或软件故障会阻止错误完成（Suárez Fernández Miranda 等人，2016）。此外，单架无人机的使用对可靠性和耐久性要求很高，这通常意味着设计、建造和维护成本较高。

考虑到多用途无人机的使用，一个相关的问题是降低集中式逻辑解决方案所要求的协调复杂性（McCune 等人，2013）。在分散化的方法中，无人机群可以抑制一定程度的自主性。

最简单的形式是，无人机群的特征是大量具有本地通信、感知和驱动能力的同质个体（代理）（Maza 等人，2015）。这种系统具有不同的优势：（i）它可以利用自组织的原理进行并行/集体扫描，类似于自然群；（ii）它是可伸缩的，因为通过增加群中的代理数量，它的有效性很难保证；（iii）实际上它是灵活的，由于单个代理逻辑的简单性，它可以根据场景进行调整；（iv）它是健壮的，因此任务完成不受某些群成员的错误影响（Aznar 等人，2014；Schmickl 等人，2011）。

群体行为可以通过采用三个主要概念框架进行设计（Brambilla 等人，2013）：（i）集体决策，其中无人机旨在就集体战略达成共识，以最大化群体的性能；（ii）空间组织行为，其中，无人机根据一组空间约束进行聚合，以按照特定的模式、链或结构进行排列；（iii）基于导航的行为，其中每个无人机遵循一组简单的行为规则来引导整个群体并协同探索环境。后者通常是利用生物启发的方法设计的，主要用于搜索和覆盖任务。

本文考虑并比较了两种不同的群体行为模型，即模仿社会动物元启发式的生物行为模型和考虑利用无人机信息技术改进的计算行为模型。我们的目的是验证一些增强是否能够降低复杂度和更有效地优化结构参数。事实上，数字环境可以使生物模型专业化，从而简化机制和动力学，进而简化研究空间。更不用说，这种计算行为保留了原始生物学行为的基本好处。具体而言，生物行为主要集中在以下几个方面：

- **生物的共识主动性**（stigmergy[^stigmergy]）：用于在已经/还没有找到目标的区域释放吸引/排斥潜能（Sauter 等人，2005a）。生物个体在执行操作时会在环境中留下一个标记，而其他生物通过感知该标记，被刺激执行一个操作。化学扩散和蒸发模型控制着标记动力学；
- **生物群集**：用于组织用于协作感知的柔性剂形成（Kaminka 等人，2008）。最著名的雷诺群集模型（Reynolds，1987）基于对齐、分离和内聚的规则：对齐将代理的航向与附近个体（群伙伴）的平均航向对齐；分离通过保持群伙伴之间的最小距离防止传感区域重叠；内聚性指导每个探员朝着群友的中心；
- **生物感应/驱动**：当物体在目标上方时发生目标感应；当障碍物向前一步时发生障碍感应；信息素释放发生在同一物体的位置；物体可以静止或移动（无增量速度和旋转控制）。最后，嗅觉感知仅仅反映了信息素的强度（没有过度刺激控制）。

[^stigmergy]: 共识主动性 (英语: Stigmergy)是社会网络中生物个体自治的信息协调机制。在没有中枢控制和接触交流的条件下，群体通过同频共振，达到信息对称，个体独立行动，互相修正，自我更新，逐步完善群体的生态环境。

计算行为具有以下特征：

- **计算共识主动性**：由于数字信息素主要存在于一个称为信息素地图的虚拟空间中，因此它可以瞬间扩散，立即将环境信息传播到附近的无人机上；此外，线性蒸发和流线型形状可以更好地控制聚集的信息素势；
- **计算群集**：同步定位和地图绘制技术允许不同规模的群集，从基于视觉的群集到基于大规模定位的形式，跨越物理障碍。
- **计算感测/驱动**：远程感测允许远程目标和障碍物的探测；因此，计算机信息素可以在无人机位置的远程目标上释放；此外，无人机可以在无障碍物的情况下加速、减速和保持巡航速度。最后，嗅觉受体可以随着时间的推移而降低敏感性，以防止过度刺激（嗅觉习惯化）。

本文利用这些行为模型来解决目标搜索问题。根据 Senanayake 等人。（2016）目标搜索是发现位于非结构化环境中的目标，事先不知道其位置和障碍物布局。过程的质量可以通过最小化完成任务所需的总时间来衡量。值得注意的是，任务期限不包括搜索问题以外的阶段，例如部署时间和返回时间。机器人群（agent）的目标搜索任务可以根据（i）目标和无人机的数量；（ii）目标的移动性；（iii）环境的复杂性；（i v）目标的先验知识；（v）群协调的类型来定义。该方法已在适当的模拟环境中进行了实验，模拟了合成和真实目标搜索任务。

具体来说，无人机的结构方面（如速度、大小、持续时间、视场、避免碰撞等）是根据每种任务通常使用的无人机类型（地雷搜索、气体泄漏检测、非法倾倒物发现等）确定的。

在模拟器外部，差分进化算法（DE）控制模型的聚合参数以搜索最有效的协调设置。优化过程是群体的一个内在组成部分：在某种意义上，只有在优化之后，无人机的初始集合才成为群体，即一个有效的或专门针对任务类型的组织。

论文结构如下。相关工作见第 2 节。第三节详细介绍了无人机协调元启发式算法的设计。第 4 节涉及特派团的设计和质量措施。第五节给出了实验结果并进行了讨论。最后，第 6 节总结了本文的结论和今后的工作。

### 2.目标搜索的群元启发式相关工作

利用群体进行目标搜索的元启发式方法已经有了很多研究：这项研究的特点是目标、方法和场景的异质性。最近的一些调查（例如（Senanayake 等人，2016））试图建立一个分类法，讨论拟议方法之间的质量差异。在这一节中，一些相关的工作被简要地介绍和总结给感兴趣的读者。

#### 2.1 共识主动性和群聚元启发式方法

在现有的基于生物学的搜索方法中，共识主动性(stigmergy)和群聚(flocking)被广泛应用于协调无人机群的目标搜索任务。

Sauter 等人提出了一种基于 stigmergy 的群集模式，其中虚拟信息素被放置在信息素地图上并由代理感知。具体地说，移动和动作决策由 walker 代理执行，而化身代理则致力于在缺少传感器信息的情况下进行估计。该方案适用于许多场景，包括目标捕获。在 Brust 等人。（2017）作者设计了一个结合 stigmergy 的多跳聚类过程，以提供一组目标的最优解，其中 tar-get 检测和跟踪。此外，他们还提出了一个包含吸引和排斥信息素的信息素模型，分别用于标记检测目标和访问区域。在（Atten 等人，2016）中，针对类似任务，提出了这种信息素模型的另一个应用。

flocking 最初是由雷诺兹（1987）提出的。在 Vasérhelyi 等人中提出了一个例子。（2014）作者提出了基于群集的无人机分散协调策略。群集用于将无人机保持在通信范围内，并在任务期间进行协调。在 Hauert 等人。（2011）提出了一组多个固定翼无人机以相对较大的距离飞行。群集策略也适用于无人机在搜索区域自主导航的情况（Quintero 等人，2013 年）。

## 【2009】基于蚁群算法和 APF 算法相结合的移动机器人路径规划混合方法

> 引用格式:TAN X, CHEN D. A Hybrid Approach of Path Planning for Mobile Robots Based on the Combination of ACO and APF Algorithms: IEEE, 2009.

::: tip 摘要
本文提出了一种基于人工势场（APF）和蚁群优化（ACO）算法相结合的局部已知环境下移动机器人全局路径规划的优化方法。这一方法分为两个步骤。首先，利用可视图方法建立了移动机器人的自由空间模型，并利用蚁群算法搜索出一条全局无碰撞路径，该路径是通过已知静态障碍物的最短路径。其次，在遇到未知障碍物时，采用 APF 算法实时生成局部路径，避免碰撞。仿真实验结果表明，该方法具有良好的收敛速度和动态性能，适合复杂环境。
:::

在大多数情况下，如工厂仓库，移动机器人需要按照一定的标准从起点导航到目的地而不发生碰撞。在已知障碍物中寻找最短路径的需求导致了全局最优路径规划问题。为了解决这一问题，人们提出了各种优化方法，如 A*算法、Dijkstra 算法和可视图(visible graph)法。在文献[1]中，引入了由 A*执行的引导搜索，以实现比 Dijkstra 算法更快且计算成本更低的路径规划。

近年来，针对移动机器人路径规划的智能算法如人工神经网络、遗传算法、蚁群算法等得到了广泛的应用。蚁群算法具有正反馈搜索机制、分布式计算等突出优点，在获得全局最优解方面具有较好的概率。

当工作环境中存在意外障碍物，会导致偏离原全局最优路径。该问题应通过局部路径规划来解决，如 D\*[3]、动态窗口法[4]和**人工势场法（Artificial Potential Fields, APF）**[5]。APF 算法能够提供一个平滑的、无碰撞的路径，但由于势能的局部极小等限制，使得 APF 算法不适合全局路径规划。

路径规划的一个有用的解决方案是将离线全局路径规划器与在线反应式规划器相结合。本文提出了一种混合算法，其中蚁群算法用于在已知障碍物中寻找欧氏最短路径。然后利用 APF 方法给出了机器人沿全局最优路径运动并避免与未知障碍物碰撞的控制策略。

### 2.全局最优路径的生成方法

全局路径规划利用静态障碍物的所有可用信息来寻找欧氏最短路径。
有两个步骤：（1）自由空间建模。利用可视图方法；（2）欧氏最短路径搜索。利用蚁群算法搜索全局最优路径。

### 2.1 自由空间建模

工作环境自由空间的定义是机器人能够自由导航的空间。图 1 显示出了移动机器人的工作环境，面积为 400×400 平方米，包括 6 个障碍物。每个块代表一个障碍物，障碍物的每个顶点由符号表示，例如 $v_1,v_2,\cdots, v_{24}$。符号 $S$代表起点，符号 $G$ 代表终点。

![tOhXWQ.png](https://s1.ax1x.com/2020/06/12/tOhXWQ.png)

:::warning 解读
黑色虚线是顶点连接线，图中仅仅是使用了**一部分顶点连接线**将工作环境进行分隔而已。然后找到顶点连接线的中心点，进行连线，选最短的路径作为**次**最优路径。
:::

自由空间由几个多边形区域组成，每个多边形区域由**顶点连接线**(vertices-link)包围。顶点连接线定义如下：

1） 顶点连接线的两个端点都是属于两个相邻块的顶点；
2） 从靠近正方形边界的顶点垂直于正方形边界的线。

根据该定义，可以得到所有的顶点连接线，并用虚线绘制的顶点连接线将工作环境划分为多个多边形区域。结果如图 1 所示。

将符号 $n$ 指定为顶点连接线的总数。每个顶点连接线都有一个中间点，可以表示为 $m_i(i=1,2,\cdots,n)$。将 $m_0, m_{n+1}$ 分别指定为 S 和 G 点。点 S，G 和所有中间点构成一个集 M={m0，m1，…，mn，mn+1}。每两个相邻的中间点连接起来，就可以形成一个路径图。图 1 中的细虚线表示自由导航的所有可能路径。

通过测量每条可能路径的总长度，可以快速找到路径图中的**次最短路径**。结果由点 S–m13–m14–m15–m19–m22–m26–m27–m28–m12–G 按顺序表示，由图 2 中的连续线绘制。次短路径全长 575.75 米。

### 2.2 寻找全局最优路径的蚁群算法

假设符号 g 表示次最短路径通过的顶点连接线的总数，符号 $q_i(i=1,2,\cdots,g)$表示次最短路径的第 $i$ 个交点，$q_0,q_{g+1}$分别表示起点 $S$ 和终点 $G$。**更改每个交点在其顶点连接线上的位置**可以最小化次短路径的总长度。

$q_i(i=1,2,\cdots,g)$在第 $i$个顶点连接线上的位置可以用下面的公式描述：
![tOTfKJ.png](https://s1.ax1x.com/2020/06/12/tOTfKJ.png)

一系列的 $f_i$ 形成一个参数集，不同的 $f_i$ 值产生不同的路径。因此，利用蚁群算法将搜索全局最优路径问题转化为寻找$\{f_1,f_2,\cdots,f_g\}$的最优值问题。
![tOTb8O.png](https://s1.ax1x.com/2020/06/12/tOTb8O.png)

连续参数 $f_i$ 的工作区域为$(0,1)$，为满足 ACO 算法离散解的需要，需要将其划分为若干部分。$f_i$ 的工作区域可以分成 9 部分，即 0.1、0.2、…、0.9，使得$\{f_1,f_2,\cdots,f_g\}$的所有工作区域构成网格图，如图 2 所示。参数 $f_i$ 的值不能为 0 或 1，因为这意味着机器人与障碍物的顶点发生碰撞。

假设符号 uij 表示 fi 上的第 j 个单位。根据蚁群算法，蚂蚁从 S 点出发，沿着直线走到下一个顶点连接线上的下一个单元。以 τij（t）为单位 uij 的信息素浓度，t 为 ACO 算法的迭代计数器。开始时，各单位的信息素浓度相同，即 τi j（0）=C（i=1，2，…，g；j=1，2，…，9）。第 i 条垂直链接线上的蚂蚁将从第（i+1）条顶点链接线的九个单位中选择一个单位移动到。过渡概率定义如下：
![tXzbOP.png](https://s1.ax1x.com/2020/06/13/tXzbOP.png)
式（2）中，ηij（t）表示单元 uij 上可见性的局部启发式函数，其定义如下：
![tXzOw8.png](https://s1.ax1x.com/2020/06/13/tXzOw8.png)
dij 表示垂直连接线上的单元 i 与（i+1）顶点连接线上的单元 j 之间的距离。
在所有蚂蚁完成一次巡游后，每个单位的信息素浓度都应该更新。信息素浓度的全球更新规律如下：
![tjSFmV.png](https://s1.ax1x.com/2020/06/13/tjSFmV.png)
式中：ρ 为信息素衰减参数；Δτij k 为信息素浓度的局部更新规律，可由下式计算：
![tjSZY4.png](https://s1.ax1x.com/2020/06/13/tjSZY4.png)

$L_k$表示所有蚂蚁经过的路径的总长度。

ACO 算法的实现如下：
第一步。建立工作环境的自由空间模型，寻找次最短路径。

第二步。根据每个单元的转移概率，生成从起点到终点的多条路径，每一条代表蚂蚁的一次旅行。

第三步。测量每条路径的长度，计算信息素浓度的增量。更新所有单位的信息素浓度。

第四步。通过对齐所有已移动蚂蚁的轨迹来修改每个可能的路径，并计算修改路径的长度。如果修改后的路径长度小于当前最短路径的长度，则将其替换。

第五步。重复上述过程，直到所有蚂蚁的轨迹聚焦到全局最优路径。

![tjSMOx.png](https://s1.ax1x.com/2020/06/13/tjSMOx.png)

::: warning 解读
可以用 PSO 进行优化，原理很简单，思路还是很不错的，但以上想法仅限于寻找**固定障碍物**的最短路径。
:::

#### 2.3 蚁群算法的仿真实验

通过仿真实验验证了该算法的性能。参数如表 1 所示：

![tjSsAS.png](https://s1.ax1x.com/2020/06/13/tjSsAS.png)

结果如图 3 所示。全局最优路径用虚线表示，其长度为 481.04m，相应的 fi 参数集为{0.4,0.6,0.1,0.5,0.9,0.8,0.8,0.9,0.8}。

### 3. APF 算法的避碰

**意外障碍物**的存在会导致机器人偏离原轨迹，因此机器人应该在局部地图上找到一条局部无碰撞路径以避免碰撞。一些研究者提出了不同的基于传感器的路径规划算法来解决这一问题。

全局最优路径有一系列的航路点，这些航路点存储在二维数组中。这些航路点由 fi={0.4、0.6、0.1、0.5、0.9、0.8、0.8、0.9、0.8}的参数集确定。当机器人在从第 i 个航路点到（i+1）个航路点的过程中，传感器检测到未知障碍物时，采用 APF 方法规划一条实时的局部路径以避免碰撞。在人工势场的作用下，机器人通常被视为点质量 U（x，y），（x，y）代表机器人的当前位置。

机器人被第（i+1）个航路点发射的吸引力 $F_{attr}(x,y)$吸引，并接收来自意外障碍物的排斥力 $F_{repl}(x,y)$。第（i+1）个航路点用梯度 $\Delta U_{attr}$ 建模，意外障碍物用梯度 ΔUrepl 建模。$F_{attr}(x,y)$，Frepl（x，y）与 $\Delta U_{attr}$，ΔUrepl 之间的关系可以描述如下：

![tjSRcn.png](https://s1.ax1x.com/2020/06/13/tjSRcn.png)

机器人的运动是由吸引力和排斥力共同决定的。

![tjSoAU.png](https://s1.ax1x.com/2020/06/13/tjSoAU.png)
如图 5 所示，机器人沿着全局最优路径行走，直到在航路点 6（W6）和航路点 8（W8）之间出现意外障碍物。航路点 7 被意外障碍物占用。以航路点 6 为起点，以航路点 8 为终点。

APF 方法将生成一条曲线路径来完成局部无碰撞任务。此曲线路径从起点到终点并满足以下特性：对于任何点，它的延伸方式都使从起点到终点的总距离最小化。
势函数可以定义为：

![tjpSAO.png](https://s1.ax1x.com/2020/06/13/tjpSAO.png)

在等式（8）中，$k_R$是一个常数系数。$u$表示曲线路径的弧长。根据方程（6）～（8），可以建立 APF。仿真结果如图 5 所示。

在部分已知的环境中，由 ACO 和 APF 算法的组合生成的整个路径如图 6 所示。
![tjSLcR.png](https://s1.ax1x.com/2020/06/13/tjSLcR.png)
