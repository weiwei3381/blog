# 无人机搜索

## 【2020】不确定动态环境下无人机群智能协同任务规划方案

> 论文下载地址：<a :href="$withBase('/无人机智能协同.pdf')" >无人机智能协同.pdf</a>，引用类型：ZHEN Z, CHEN Y, WEN L, et al. An intelligent cooperative mission planning scheme of UAV swarm in uncertain dynamic environment[J]. Aerospace Science and Technology, 2020,100: 105826.

:::tip 摘要
提出了一种基于人工势场和蚁群优化（HAPF-ACO）混合算法的无人机群智能协同任务规划方案，用于在不确定动态环境下搜索和攻击对时间敏感的运动目标。在无人机群搜索攻击任务环境下，建立了动态拓扑交互作用下的时敏目标概率图。在此基础上，构建了环境认知的目标吸引场、威胁排斥场和排斥场。为了提高无人机的全局搜索能力，设计了一种分布式蚁群算法。针对该任务规划问题，考虑了四种时间敏感的运动目标类型和四种约束类型的无人机群，为 HAPF-ACO 的实际应用奠定了基础。通过仿真实验，证明了所提出的智能协同任务规划方案在任务执行效率、避障避碰性能等方面的优越性。
:::

### 1.引言

无人机（UAV）在现代空战中被越来越多地用于拓展有人机的作战能力[1]。然而，随着任务环境的日益复杂，单台无人机的任务执行能力有限。因此，无人机的协同控制技术得到了广泛的研究。无人机群协同控制的分布性、自主性和鲁棒性要求与蚁群、蜜蜂群、鸟群和鱼群等生物群的分散自组织特性相似[2]。无人机群是受生物群自组织机制启发而形成的一种自主系统，通过能力互补和协同作战，极大地提高了执行效率。

由于无人机群规模庞大，其计算量和通信量呈指数增长，难以在有效时间内集中决策。因此，分布式决策方案已被提出用于各种应用，如群聚[3]、侦察[4]、监视[5]、负载运输[6]、搜索[7]、任务分配和路径规划[8-10]。在搜索任务规划问题中，概率图[11-14]和信息素图[15-17]得到了广泛的应用。目标概率图能够描述未知环境下的动态目标信息，基于此，文献[14]考虑分散通信协议，利用局部信息对目标概率进行建模。另外，利用信息素反馈机制对未知环境下的地图进行更新，可以提高地图的搜索效率。为无人机群体协同搜索设计了一种改进的信息素地图[17]。然而，无人机之间的避碰通常被忽略，因此提出了一种基于虚拟力和后退视界法的混合方案[18]。此外，仿生优化在无人机暖机任务规划中得到了广泛的应用。将鸽子算法应用于多无人机协同搜索运动目标[19]。针对主从式无人机目标检测问题，设计了一种带窗边势函数的鸟群算法，并通过实际实验验证了算法的鲁棒性[20]。马尔可夫决策过程已用于多无人机的监视任务规划[21]，而遗传算法和蚁群优化[23,24]已用于多无人机的静止目标协同搜索攻击任务，特别是，文献[24]考虑了无人机的避碰和最大距离约束。此外，参考文献[25]提出了基于毕达哥拉斯速度曲线的多无人机障碍物和禁飞区的任务分配和路径规划耦合问题。首先，这些仿生算法通常将全局优化问题分解为局部优化问题，体现了分布式协同策略的有效性。

本文旨在解决具有时敏运动目标的未知环境下固定翼无人机群协同搜索攻击任务规划问题。与文献结果不同，本文的主要贡献如下：首先提出了一种混合人工势场蚁群优化算法（HAPF-ACO），用于在不确定动态环境中搜索和攻击时间敏感的运动目标；APF 由根据目标概率图（TPM）设计的目标吸引场、基于禁飞区设计的威胁排斥场和无人机群间的排斥场组成，考虑了四种运动和时间敏感的目标类型，包括未知位置、已知位置和未知速度、已知位置在任务规划问题中，不仅要考虑机动性约束、避碰约束和避障约束，还要考虑距离约束。

本文的其余部分安排如下。第二部分，研究了无人机群协同搜索攻击任务规划问题。第三部分设计了无人机的 TPM、APF 和信息素地图，提出了 HAPF-ACO 算法来实现无人机的在线搜索攻击决策。在第 4 节中，进行了仿真以验证 HAPF-ACO 的有效性。最后，第 5 节给出了结论。

### 2.无人机群协同任务规划问题建模

2.1 **任务环境模型**

假设群中的固定翼无人机是同构的，即每个无人机具有相同的功能和性能约束。指定一个任务区域$D \in R^2$，群中有无人机$N_V$、动态移动目标$N_T$和威胁分布$N_P$。无人机群的任务是通过一种有效的决策方法，在不确定的动态环境中协同搜索和攻击运动目标。

![离散任务区](https://s1.ax1x.com/2020/06/07/t2xI6f.png)
▲ _图 1 离散任务区_

以二维空间为例，如*图 1* 所示，将任务区离散成 $N_x \times N_y$大小的栅格地图，分别记录每个栅格的长度和宽度为 $L_x$、$L_y$。无人机的机动性能与离散空间的搜索相对应，无人机的运动反映为离散网格点上的运动。红色五角星代表目标，黑色圆圈代表威胁区域，威胁半径为 $R_t$，假设无人机探测范围在任务区平面上的投影半径为$R$，无人机探测范围内出现的目标和威胁可以被无人机探测到。假设无人机的最大转弯角为 $\varphi_{max}$，无人机的速度为$v$，单位时间内的位移为$d$。如果网格的长度和宽度选择为$d$，则灰色网格表示在机动约束下无人机下一时刻的可能位置。

2.2 **动态拓扑交互模型**
以往的研究大多假设无人机可以同时与探测半径内的所有个体进行交互。这种通信方式会使无人机的通信邻居数量随着集群分布密度的变化而发生很大的变化，从而对通信量产生较大的影响。本文通过模拟生物群的信息交互机制，设计了一个动态拓扑交互模型。该模型使无人机的邻居数目基本保持不变。当群规模大、分布密集时，优势尤为明显，可以大大减少群的流量。

为了反映这种拓扑交互特征，定义了协同半径 $r^{coor}_i$ 来表示个体的实际交互规模。无人机可以实时感知协同半径内个体的状态信息，其交互邻居集可以表示为
![t2vbJ1.png](https://s1.ax1x.com/2020/06/07/t2vbJ1.png)

由于无人机的位置是实时变化的，为了达到一个基本不变的邻居数目，协作半径 $r^{coor}_i$通过下面的公式定义：
![t2vjsO.png](https://s1.ax1x.com/2020/06/07/t2vjsO.png)

其中$0<k<1$为调整率。$R_{sen}$ 是无人机的感知半径，是通信距离的上界，即 $r^{coor}_i \le R_{sen}$。$|N^c_i|$ 是第 $i$ 架无人机的当前邻居数量。$n_{topo}$是预期的邻居数。

无人机之间的通信网络结构可以用图 $G(V, E, A)$ 表示，其中 $V={V_i, i=1,2, \cdots ,N_V}$ 是图 $G$ 中的无人机节点$N_V$，$V_i$代表第 $i$ 架无人机。$E \in V \times V$表示图 $G$ 的边集，每边 $e_{ij}=(v_i,v_j) \in E$ 表示 第 $j$ 个无人机可以向第 $i$ 个无人机发送信息，$v_j$称为 $v_i$ 的父节点，$v_i$ 所有父节点的集合是 $v_i$ 的邻居集，图中每个节点的关系用邻接矩阵 $A=[a_{ij}] \in R^{n \times n}$表示，其中 $a_{ij}$表示节点 $v_j$到 $v_i$ 的连接权重，表示为
![tRC8Z8.png](https://s1.ax1x.com/2020/06/07/tRC8Z8.png)

其中 $d_{ij}$ 是第 $i$ 个无人机和第 $j$ 个无人机之间的距离。

2.3 **协同搜索攻击任务优化模型**

无人机群协同搜索攻击的目的是在给定的约束条件下，覆盖任务区域，发现并摧毁更多的目标。因此，目标攻击效益 $J_T$ 和环境搜索效益 $J_E$ 是协同搜索攻击任务的性能指标，$J_T$是被无人机攻击的目标总价值，$J_E$可以用任务区的覆盖率来表示，计算为搜索到的网格与任务区内所有网格的比率，分别定义为

![tRCBLV.png](https://s1.ax1x.com/2020/06/07/tRCBLV.png)
:blue_book: `公式(4)`

其中 $N_{target}(k)$是在时间 $k$ 时攻击的目标总数，$value_m$ 代表第 m 个目标的价值。如果在时间 $k$ 时$grid_{(m,n)}(k)$未被覆盖，则 $grid_{(m,n)}(k)=0$，否则，$grid_{(m,n)}(k)=1$。

无人机群协同搜索攻击任务的目标是在一定的约束条件下获得决策输入，使总体性能指标最大化。因此，合作搜索攻击任务优化模型被构造为：

![tRPMY4.png](https://s1.ax1x.com/2020/06/07/tRPMY4.png)
:blue_book: `公式(5)`

其中 $\omega \in \{0,1\}$，$\omega =1$ 表示执行攻击任务，而 $\omega =0$表示执行搜索任务。$U^*$是代表无人机在下一时刻的位置的解获得的最优决策输入。**$C_m$、$C_c$、$C_t$ 和 $C_r$ 分别表示无人机的机动约束、避碰约束、避障约束和距离约束**:

- $C_c$碰撞约束：$d_{ij}(k)$是第$i$架无人机和第$j$架无人机之间的距离，应该大于最小安全距离$d_{min}$，以防止无人机之间发生碰撞。
- $C_t$避障约束：$d^T_{il}(k)$是指第 $i$ 架无人机与第 $l$ 个威胁之间的距离，该距离应大于威胁半径 $R^t_l$ 以避开威胁。
- $C_r$距离约束：$L^i_{past}(k)$是 第 $i$ 架无人机的飞行距离，应小于该无人机的最大航程极限$L_{max}^i$，以防止飞行过程中燃油耗尽。

考虑到无人机群是一个非中心分布式系统，将无人机群的全局性能:blue_book:`公式(4)`分解为单个无人机的局部性能指标，从而：

![tRK8c8.png](https://s1.ax1x.com/2020/06/07/tRK8c8.png)

其中$\mu_i$表示第 $i$ 架无人机的权重。然后将分布式优化模型设计为:

![tRKD3V.png](https://s1.ax1x.com/2020/06/07/tRKD3V.png)
:blue_book: `公式(7)`

其中$X_i$, $\tilde{X}_i$分别是第 i 架无人机及其邻居的状态。$J_{Ti}(X_i, \tilde{X}_i)$是第$i$架无人机的目标攻击效益，$J_{Ei}(X_i, \tilde{X}_i)$是第$i$架无人机的环境搜索效益，$C_i$是一组约束条件。

:::warning 根本目的
:blue_book:`公式(7)`的主要目的就是把:blue_book:`公式(5)`中的全局指标改为单个无人机局部指标之和。
:::

### 3. HAPF-ACO 算法设计

该部分提出了用于协同搜索攻击任务规划的 HAPF-ACO 算法，包括目标概率图、环境认知、信息素更新机制和状态转移规则的设计。

#### 3.1 目标概率图

目标概率图(Target probability map
, TPM) 描述了任务区内目标的分布情况，旨在提高发现目标的可能性。在离散任务区，$p^i_{mn}(k)$是第 $i$ 个无人机学习到的网格 $(m,n)$ 目标存在概率，$p^i_{mn}(k) \in [0,1]$。任务区$D$内所有网格的目标存在概率构成概率分布矩阵：

![tRtuMn.png](https://s1.ax1x.com/2020/06/07/tRtuMn.png)

(1) ++目标概率图初始化++

在初始时刻，各无人机根据目标的初始位置、速度和运动方向等先验信息初始化自己的 TMP。考虑到时间敏感目标，它们可以分为以下四种类型。

- **当目标的初始位置未知时**。任务区内任意网格中目标的概率相同，可以用均匀分布来描述目标的概率分布密度函数.
- **当目标的初始位置为$(x_*, y_*)$，目标速度未知时**。考虑到先验信息的可能误差，可以认为目标实际位置$(x_0,y_0)$的概率服从二维正态分布$N(x_*, y_*, \mu_0^2, \mu_0^2, \rho)$。因为$x_0,y_0$彼此独立，$\rho = 0$所以
  ![tRwmDA.png](https://s1.ax1x.com/2020/06/07/tRwmDA.png)
- **当目标初始位置为$(x_*, y_*)$, 目标初始速度为 $v$，目标运动方向未知时**。目标实际位置$(x_0，y_0)$为随机变量，无人机在时间 $t_0$ 后进入任务区。由于目标速度是固定的，使得目标概率密度发生变化，点$(x, y)$处的概率密度$f(x,y)$是从半径为 $v \cdot t_0$ 的圆弧上的正态分布.
- **如果目标的初始位置为$(x_*, y_*)$，目标运动速度为 $v$，运动方向为 $\theta, \theta \in [0,2\pi]$时**。目标位置的分布偏离实际位置$(x_0，y_0)$，偏移量为$(vt_0cos(\theta), vt_0sin(\theta))$。那么概率密度函数是
  ![tRDOaR.png](https://s1.ax1x.com/2020/06/07/tRDOaR.png)

那么单个网格$(m, n)$的目标存在概率$p^i{mn}$可以表示为：
![tRrGiq.png](https://s1.ax1x.com/2020/06/07/tRrGiq.png)

然后进行归一化得到初始目标概率分布矩阵：

![tRrdL4.png](https://s1.ax1x.com/2020/06/07/tRrdL4.png)

(2) ++探测更新++

随着搜索攻击任务的推进，无人机对该区域的感知也在加深。因此，在每个决策周期中，无人机都需要根据传感器检测信息动态更新 TMP。与传感器探测距离相关的目标探测概率由下式给出:

![tRrheH.png](https://s1.ax1x.com/2020/06/07/tRrheH.png)
:::warning 解读
等式左边表示**无人机距离目标$d_k$时发现目标的概率**，等式右边考虑 3 种情况：（1）在检测范围中，（2）不确定的检测，（3）无法检测（产生虚警）。
:::
其中 $b_k \in \{0,1\}$为检测结果，$b_k=0$ 表示传感器视场（field of view, FOV）中没有目标，$b_k=1$ 表示有目标；$P_D \in [0,1]$为传感器检测概率，$P_F \in [0,1]$为虚警概率。$d_k$ 表示传感器到目标的距离，如果 $d_k<d_{in}$，传感器可以检测到目标，但由于观测的不确定性，检测到目标的概率为 $P_D$，如果 $d_k>d_{out}$，传感器无法检测到目标，如果仍然报告检测到目标，则为虚警，检测到的概率为 $P_F$。

文献[^26]考虑了覆盖多个网格的传感器，并根据传感器检测结果更新目标存在概率图。在这里我们假设 FOV 中只有一个网格(相当于一次就只检测一个网格)，然后基于贝叶斯概率公式设计了一个简化的目标存在概率图更新公式，如下所示：

[^26]: A.G. Shem, T.A. Mazzuchi, S. Sarkani, Addressing uncertainty in UAV navigation decision-making, IEEE Trans. Aerosp. Electron. Syst. 44(1) (2008) 295–313

![tRbLcD.png](https://s1.ax1x.com/2020/06/08/tRbLcD.png)
:blue_book: `公式(18)`

其中$\tau \in [0,1]$ 是衰减系数，用于表征动态环境。

:::warning 解读
上述:blue_book: `公式(18)`主要描述的是从第$k$步的网格$(m,n)$的概率, 通过搜索情况, 推算出第$k+1$步的网格$(m,n)$的概率，公式中用到了$P_D$（传感器检测概率）和$P_F$（虚警概率），具体公式怎么来的，可能还需要读文献[^26]。
:::

(3) ++预测更新++

两次决定($k$和$k+1$步)之间的时间间隔是 $\Delta t$。为了保证概率图的准确性，提高无人机群的搜索攻击效率，需要对无人机的运动进行预测，并更新相应的 TPM。

第 $k$ 个决策周期的目标位置是一个随机变量$(x^k，y^k)$，第 $k$ 个周期概率密度函数是 $f_k(x^k, y^k)$，用全概率公式表示:

![tRjBFA.png](https://s1.ax1x.com/2020/06/08/tRjBFA.png)

根据目标运动信息的不同，条件概率可以分为以下三种类型。

- **速度的大小和方向是未知的**。目标从第 $(k-1)$个周期到第 $k$个周期内的运动是一个独立的增量过程，$X(t) \sim N(0,\delta_e^2\Delta t)$ 和 $Y(t) \sim N(0,\delta_e^2\Delta t)$ 由维纳随机过程(Wiener random process[^wiener])确定。条件概率密度是
  ![tRx02t.png](https://s1.ax1x.com/2020/06/08/tRx02t.png)

- **速度的大小是已知的，速度的方向是未知的**。经过一段时间后，目标均匀地分布在半径 $v \Delta t$ 和圆心$(x^{k-1}, y^{k-1})$的弧上。条件概率密度表示为:
  ![tRzwo4.png](https://s1.ax1x.com/2020/06/08/tRzwo4.png)
- **速度的大小和方向都是已知的**。目标位置的分布与前一个周期的位置偏移。偏移量为$(v \Delta t \cdot cos \theta, v \Delta t \cdot sin \theta)$。条件概率密度函数表示为
  ![tWAvAP.png](https://s1.ax1x.com/2020/06/08/tWAvAP.png)

[^wiener]: 常见随机过程: [知乎专栏](https://zhuanlan.zhihu.com/p/93836989)

与 TPM 初始化类似，归一化后得到预测更新的 TPM，并将其结果作为下一时刻决策的先验信息。

#### 3.2 基于 APF 的环境认知

将无人机的运动环境抽象为一个势场，目标对无人机产生吸引力，障碍物对无人机产生排斥力。利用吸引力和斥力的联合作用，控制无人机的运动，引导无人机到达指定的目标位置，有效地规避环境威胁。针对无人机之间的避碰问题，引入了无人机之间的**势场**。

(1) ++目标吸引场++

基于 APF 方法，目标将产生一个引力场 $U_{att}(X)$，通过对无人机施加引力 $F_{att}$ 使无人机接近目标。在无人机群的搜索攻击任务中，目标存在概率越大，无人机越倾向于向该网格转移。然后，将 TPM 作为目标吸引场。

根据第 $i$ 个无人机的实时 $TMP_i$，吸引力场设计为:

![tWAbXd.png](https://s1.ax1x.com/2020/06/08/tWAbXd.png)

其中 $k_{att}$ 是引力系数。目标吸引力是无人机所在位置目标吸引场的梯度：

![tWALnA.png](https://s1.ax1x.com/2020/06/08/tWALnA.png)

在目标吸引力的作用下，无人机将向目标存在概率上升最快的方向移动。当确认目标被探测到时，无人机将根据目标吸引力接近目标，直到目标在无人机攻击半径内，再攻击目标。如果同时发现多个目标，优先选择值较高的目标进行攻击。

:::danger 疑惑
理论上可以这么假设，但是如果使用势场的方式，那么多个目标的吸引力叠加怎么解决，而且可能永远无法吸引目标点，到另外获取场信息需要的计算量很大。
:::

(2) ++威胁排斥场++

无人机可能遭遇当地恶劣天气、地形阻挡和敌人威胁造成的禁飞区。为了保证无人机的安全和任务的顺利执行，无人机需要避开威胁区域。在人工势场法的基础上，威胁区域产生一个斥力场 $U_{rep}^T$，该斥力场可以通过施加斥力使无人机远离威胁。

假设威胁区域为圆形，中心位置为 $X_t$，半径为 $R_t$，当无人机到威胁区域边缘的距离小于无人机的探测半径 $R$ 时，无人机可以探测到威胁，即：无人机与威胁区中心的距离小于 $R+R_t$，为严格防止无人机进入威胁区，设计的斥力应随着无人机与威胁区距离的减小而增大。如果 第$i$ 个无人机的位置是 $X_i$，那么威胁击退设计为

![tWAmyd.png](https://s1.ax1x.com/2020/06/08/tWAmyd.png)

其中 $k_{rep}$ 为斥力系数，$x_{il} = X_i-X_t^l$ 为检测到的指向第 $i$ 架无人机的第 $l$ 个威胁的位置向量，$\hat{x}_{il}=x_{il}/ ||x_{il}||$。$d_{max,l}^t$ 是第 $l$ 个威胁排斥场的作用半径，如果无人机与威胁中心的距离大于 $d_{max,l}^t$，则无人机不再受到排斥力；$d_0 \ge R_t$ 为最小安全距离，则无人机与威胁中心的距离不得小于 $d_0$。

(3) ++无人机之间的排斥场++
当无人机群协同执行任务时，随着同一任务空域内无人机数量的增加，必然会有一些无人机的搜索路径在时间和空间上重叠，导致无人机之间发生碰撞。为了保证无人机的安全，距离过近的相邻无人机会产生排斥场 $U_{rep}^V$，实现无人机群之间的动态避碰协调。本文基于以下广义 Morse 函数[^morse]建立了无人机之间的斥力场:

![tWkOiT.png](https://s1.ax1x.com/2020/06/08/tWkOiT.png)

[^morse]: 关于 morse 函数应用在路径规划的论文, [下载地址](https://www.ri.cmu.edu/pub_files/pub2/choset_howie_2000_1/choset_howie_2000_1.pdf)

其中 $b$ 和 $c$ 是可调参数，分别决定排斥场的大小和变化率。$x_{ij} = X_i-X_j$ 是第 $j$ 架无人机到第 $i$ 架无人机的位置矢量。$[d_{\min}，d^v_{\max}]$是无人机之间排斥场的范围，$d_{\min}$ 是无人机之间的最小安全距离。如果 $x_{ij}<d_{\min}$，则无人机之间发生碰撞。$d^v_{\max}$ 是无人机之间排斥场的最大工作距离。

作为排斥场的负梯度，无人机之间的排斥是：

![tWkssA.png](https://s1.ax1x.com/2020/06/08/tWkssA.png)
:blue_book:`公式27`

式中，$\hat{x}_{ij}=x_{ij}/||x_{ij}||$ 是从第 $j$ 架无人机指向第 $i$ 架无人机的单位矢量。当确定了参数$b$ 和 $c$时，无人机之间的斥力大小仅取决于距离。距离越近，排斥力越大，可以有效实现无人机之间的防碰撞。

#### 3.3 信息素更新机制

为了实现无人机之间的任务协同，将信息素值分配给任务区的所有网格。设计了一种信息素更新机制，避免无人机搜索其他无人机搜索过的网格，并驱动无人机搜索未搜索过的网格。

(1) ++分布信息素结构++

不同网格的信息素浓度反映了网格对无人机的吸引力程度。信息素浓度越高，无人机越倾向于向该网格转移。因此，无人机可以根据搜索情况合理更新局部信息素结构，实现群体的任务协调。

无人机群采用无中心节点的分布式体系结构。因此，群体中没有公共信息素。每个无人机都建立自己的局部信息素结构，只更新自己维护的信息素结构。任务区内各网格在某一时刻的信息素浓度值构成了该时刻无人机的局部信息素结构，表明无人机对当前环境搜索态势的感知。第 $i$ 架无人机维持的局部信息素结构 $\tau^i(k)$为：

![tWkUIK.png](https://s1.ax1x.com/2020/06/08/tWkUIK.png)

其中 $\tau_{(x,y)}^i(k)$表示网格$(x,y)$处的信息素浓度值。

同时，为了防止某一区域的信息素浓度过高或过低，设置信息素浓度值的下限 $\tau_{\min}$ 和上限 $\tau_{\max}$，所有网格的信息素浓度应在$[\tau_{\min},\tau_{\max}]$范围内，即无人机维持的信息素结构满足

![tWk1xJ.png](https://s1.ax1x.com/2020/06/08/tWk1xJ.png)

(2) ++局部信息素更新机制++

为了避免群体对某一区域的过度搜索，无人机之间应建立协调机制。因此，为了保证无人机之间的区域搜索协调，设计了局部信息素更新规则。无人机完成一步搜索后，根据自身和相邻无人机的当前状态信息更新维护的局部信息素，降低搜索网格的信息素浓度，防止群体重复搜索某一区域。

第 $i$ 无人机在时间 $k$ 上掌握的整个群体的状态信息:
![tWku5T.png](https://s1.ax1x.com/2020/06/08/tWku5T.png)

:blue_book:`公式30`

其中 $Info_{j,i}(k_{j,i})$ 是第 $i$ 架无人机在时刻 $k$ 获得的第 $j$ 架无人机的历史状态信息，包括位置信息 $x_{j,i}(k_{j,i})$，$y_{j,i}(k_{j,i})$和运动方向信息 $\psi_{j,i}(k_{j,i})$。据此，第 $i$ 架无人机在时间 $k$ 预测蜂群的状态：

![tWEA7q.png](https://s1.ax1x.com/2020/06/08/tWEA7q.png)

基于预测信息，第 $i$ 架无人机根据以下更新机制更新本地信息素结构:

![tWEn9U.png](https://s1.ax1x.com/2020/06/08/tWEn9U.png)

![tWEMjJ.png](https://s1.ax1x.com/2020/06/08/tWEMjJ.png)

其中 $\Delta \tau_{l(x,y)}^{(i,j)}(k)$ 在网格$(x,y)$上第 $j$ 个相邻无人机引起的信息素衰减，$\Delta \tau_{l_0}$是局部信息素衰减常数，$d\left((x,y), (x^*_{j,i}(k), y^*_{j,i}(k))\right)$是网格$(x,y)$与网格$\left(x^*_{j,i}(k), y^*_{j,i}(k)\right)$之间的距离。

(3) ++全局信息素更新机制++

一个新的目标可能出现在已经搜索的区域，这会增加不确定性和对无人机的吸引力。因此，有必要相应地提高每个网格的信息素浓度。

本文设计了一种全局信息素更新机制，用于定期对所有网格执行信息素增强操作：

![tWEsEt.png](https://s1.ax1x.com/2020/06/08/tWEsEt.png)

:blue_book:`公式34`

其中$F \in (0,1)$ 为环境不确定性因子，$\Delta \tau_{g_0}$为更新步长。环境的动态性越强，$F$ 越大，信息素浓度越高。

#### 3.4 状态转换规则

对任务区域进行离散化，初始化局部人工势场和信息素结构信息。然后，根据该准则选择确定性状态转移或概率性状态转移。当蚁群进入下一个节点时，更新状态信息，预测目标概率图，直到到达目标点的终点。

(1) ++确定性转换规则++
假设当前网格是 $s_i$，考虑到无人机的距离约束，确定的过渡规则设计为:

![tWVmVI.png](https://s1.ax1x.com/2020/06/08/tWVmVI.png)

其中 $\Omega$是下一次蚂蚁的候选网格集。$\theta_j$是当前网格到候选网格 $s_j$ 的路径与当前网格位场力方向的夹角，$L_{\max}$是最大距离，$L_{past}(k+1)$为下一时刻无人机的穿越距离，$D_{left}(k+1)$为起始位置或特定目的地与网格 $s_j$ 的距离，$\omega_1$ 和 $\omega_2$ 的和为$1$，当无人机在 $k+1$ 时刻的穿越距离小于或等于最大距离的一半时，$\omega_2$等于$0$，否则 $\omega_2$等于$1$，$q$为$[0，1]$范围内的随机数，$\lambda$ 为环境感知因子，$F$代表当前网格的势能场力大小，$F_{\max}$表示当前检测范围内电势的最大值。如果 $F$较大，即附近有目标、威胁或蚂蚁太近时，将执行确定性转移。

在下一时刻，从候选网格中选择与当前势场方向成最小角度的网格作为转移节点，使蚂蚁在势场力的作用下能够快速接近目标，远离威胁区域或距离太近的蚂蚁。

::: warning 解读
所谓确定转移: 就是太靠近目标/障碍物/其他无人机时, 无人机**必须**进行转移, 以保证自身不受伤或者收集目标数据, 但是在**优先级上应首先保证自己不受伤**, 这部分论文没体现.
:::

(2) ++启发式转换规则++

当 $q \ge \lambda F/F_{\max}$ 时，采用启发式转换规则。在执行状态转换时，下次获得蚂蚁的候选网格时应考虑无人机当前位置 $p(k)$、航向$\varphi (k)$、最大转弯角$\varphi_{\max}$ 和单位决策时间的位移 $\Delta d$。然后根据每个候选网格的信息素浓度和启发式信息，选择下一时刻蚂蚁的转移网格。蚂蚁从当前网格$s_i$移动到候选网格 $s_j$ 的状态转移概率 $p_{ij}(k)$定义为:

![tWVNaq.png](https://s1.ax1x.com/2020/06/08/tWVNaq.png)

:blue_book:`公式36`

其中 $\tau_{ij}(k)$，$\eta_{ij}(k)$分别是来自网格$s_i$到$s_j$的信息素浓度和启发信息。$\alpha$ 为信息启发因子，$\beta$为期望启发因子。$p_{ij}(k)$越大，蚂蚁移动到候选网格 $s_j$的概率就越大。

基于:blue_book:`公式36`得到的各候选网格的状态转移概率，并考虑无人机的距离约束，设计了启发式状态转移规则为:

![tWVWi6.png](https://s1.ax1x.com/2020/06/08/tWVWi6.png)

其中 $q_1$ 是$[0,1]$范围内的随机数，$0<q_0<1$。$S$ 是根据:blue_book:`公式36`选择的随机变量。蚂蚁倾向于选择信息素浓度和启发式信息都较大的网格。通过将任务区域的覆盖度设计为启发式信息，蚂蚁以更高的概率移动到无搜索网格中，从而增加了寻找目标的可能性。

此外，当蚂蚁被搜索到的网格所包围时，候选网格的启发式信息基本相同，这就导致蚂蚁可能不会或需要很长时间跳出局部搜索。因此，采用了一种改进的转移规则：如果覆盖率在一定的迭代次数内没有变化，则蚂蚁将移动到最近的无搜索网格。提高任务区覆盖率，提高全局搜索能力。

#### 3.5 HAPF-ACO 流程图

基于上述设计，采用的 HAPF-ACO 算法流程如*图 2 *所示。传统的启发式蚁群算法只考虑信息素浓度和启发式信息对蚂蚁状态转移的影响。在 HAPF-ACO 算法中，APF 被引入启发式 ACO 算法，由公式（9）–（27）给出。除了公式（30）～（34）所给出的信息素浓度和启发式信息的影响外，在蚂蚁的状态转移中还应考虑 APF 力的影响，以实现在线避障和碰撞避障。因此，HAPF-ACO 算法改进了蚂蚁的状态转移规则，根据蚂蚁的网格势能将（35）给出的确定性转移和（37）给出的启发式转移结合起来，在状态转移规则中加入了无人机飞行约束。
![tWVOFP.png](https://s1.ax1x.com/2020/06/08/tWVOFP.png)
▲ _图 2 HAPF 算法流程图_

### 4.仿真分析

为了验证 HAPF-ACO 算法在无人机群搜索-攻击问题中的优越性，进行了基于 MATLAB 的仿真研究.

#### 4.1 任务场景和参数设置

任务区为 100km×100km，离散为 100×100 网格。区域内分布 16 个目标，每种类型有 4 个目标。利用相应的概率分布，初始位置方差 $\delta_0=5$ , Wiener 随机过程参数 $\delta_e=2$随机生成目标运动状态。目标运动信息如表 1 所示，其中目标 #13-#16 为均匀分布的未知目标。

![t4A4G6.png](https://s1.ax1x.com/2020/06/09/t4A4G6.png)

▲ _表 1 目标移动信息_

假设无人机在接到任务指令 $t_0=50s$ 后进入任务区，速度为 100m/s，每个决策步骤为 10s，即无人机每次决策移动一个网格。无人机的最大转弯角 $\varphi_{\max}=45°$，探测半径 3km，攻击半径 1km，传感器探测概率 $P_D=0.9$，虚警概率 $P_F=0.1$。HAPF-ACO 算法中的其他相关参数如表 2 所示。
![t4AOII.png](https://s1.ax1x.com/2020/06/09/t4AOII.png)
▲ _表 2 HAPF-ACO 算法参数的描述和值_

#### 4.2 任务执行效率分析

假设两架无人机执行任务，初始位置为（10，10）公里和（90，90）公里，不考虑任务区内的威胁。预计邻居数量$n_{topo}=1$，无人机感知半径为 50km。研究了以下三种算法：

- 算法 1：粒子群优化算法（PSO）是一种流行的仿生智能优化算法，已应用于任务规划问题[^4]。本文采用 PSO 算法来解决这一搜索攻击问题，并与提出的算法进行了比较。
- 算法 2：人工势场蚁群优化算法（ACO APF）[^27]：它是在不考虑距离约束的分布式蚁群优化算法的基础上，在不考虑 TPM 动态更新的情况下引入 APF。
- 算法 3：人工势场与蚁群混合优化算法（HAPF-ACO）：该算法基于一种分布式蚁群算法，在考虑范围约束的前提下，采用改进的过渡规则，并考虑 TPM 的动态更新，引入了 APF。

[^4]: Y.B. Wang, P. Bai, X.L. Liang, Reconnaissance mission conducted by UAV swarms based on distributed PSO path planning algorithms, IEEE Access 7 (2019) 105086–105099.
[^27]: X. Tan, D.F. Chen, A hybrid approach of path planning for mobile robots based on the combination of ACO and APF algorithms, in: International Workshop on Intelligent Systems and Applications, IEEE, Wuhan, China, 2009.
